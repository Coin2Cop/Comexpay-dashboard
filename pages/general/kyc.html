<!DOCTYPE html>
<!--
Template Name: NobleUI - HTML Bootstrap 5 Admin Dashboard Template
Author: NobleUI
Website: https://www.nobleui.com
Portfolio: https://themeforest.net/user/nobleui/portfolio
Contact: nobleui123@gmail.com
Purchase: https://1.envato.market/nobleui_admin
License: For each use you must have a valid license purchased only from above link in order to legally use the theme for your project.
-->
<html lang="en">
<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="Responsive HTML Admin Dashboard Template based on Bootstrap 5">
	<meta name="author" content="NobleUI">
	<meta name="keywords" content="nobleui, bootstrap, bootstrap 5, bootstrap5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">

	<title>Comexpay</title>

  <style>
    /*body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f4f7fa;
    }*/

    .container {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        max-width: 900px;
        max-height: 100%;
    }

    video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.3); 
    }

    canvas {
        position: absolute;
        top: 0;
        left: 0;
        border-radius: 10px;
    }

    #instruction {
        position: absolute;
        bottom: 20px;
        width: 90%;
        max-width: 700px;
        text-align: center;
        font-size: 20px;
        color: #fff;
        background: rgba(0, 0, 0, 0.7);
        padding: 12px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        font-family: 'Arial', sans-serif;
    }

    #progress {
        position: absolute;
        top: 20px;
        width: 100%;
        max-width: 700px;
        text-align: center;
        font-size: 16px;
        color: white;
    }

    .progress-bar {
        height: 8px;
        background-color: #4CAF50;
        width: 0%;
        border-radius: 5px;
        transition: width 0.5s ease-in-out;
    }

    #thankyou {
        margin-top: 20px;
        font-size: 24px;
        color: #333;
        font-family: 'Arial', sans-serif;
        display: none;
    }

    #uploadingMessage {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(0, 0, 0, 0.8);
        padding: 30px;
        border-radius: 15px;
        color: white;
        font-size: 20px;
        text-align: center;
        display: none;
    }

    #uploadingProgress {
        height: 8px;
        background-color: #2196F3;
        width: 0%;
        border-radius: 5px;
        margin-top: 10px;
        transition: width 1s ease-in-out;
    }

    /* CSS */
    #camera-capture-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #camera-overlay {
      position: relative;
      width: 100%;
      height: 100%;
    }

    #video2 {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    #overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    #capture-button {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      font-size: 18px;
      background-color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #camera-capture-container-back {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
}

#camera-overlay-back {
    position: relative;
    width: 100%;
    height: 100%;
}

#video-back {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

#overlay-back {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

#capture-button-back {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
    font-size: 18px;
    background-color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
#video-container {
    position: relative;
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: black; /* Fondo en caso de que no cargue el video */
    overflow: hidden;
}

#video {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Asegura que el video cubra toda la pantalla */
    position: absolute;
    transform: scaleX(-1);
}

    #startButton {
    position: absolute;
    bottom: 18%;
    left: 50%;
    transform: translateX(-50%);
    background: #742ACE;
    color: #fff;
    border: none;
    padding: 12px 28px;
    font-size: clamp(16px, 4vw, 18px);
    border-radius: 999px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.25);
    cursor: pointer;
    font-family: 'Poppins', 'Arial', sans-serif;
    display: none;
    align-items: center;
    gap: 8px;
    z-index: 12;
}

#startButton:disabled {
    opacity: 0.7;
    cursor: not-allowed;
}

    #status {
    position: absolute;
    bottom: 5%; /* Cambiado de 'top' a 'bottom' para alejarlo de la barra de URL */
    left: 50%;
    transform: translateX(-50%);
    width: 90%; /* Usar width en lugar de max-width para mejor control con clamp */
    max-width: 500px; /* Limitar el ancho máximo en pantallas grandes */
    font-size: clamp(14px, 3.5vw, 16px); /* Tamaño de fuente adaptable */
    color: #fff;
    background: rgba(0, 0, 0, 0.85); /* Fondo un poco más opaco */
    padding: 12px 15px; /* Padding ligeramente aumentado */
    border-radius: 8px; /* Bordes un poco más redondeados */
    font-family: 'Poppins', 'Arial', sans-serif; /* Poppins como fuente preferida */
    text-align: center;
    z-index: 10;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3); /* Sombra para destacar */
    max-height: 25vh; /* Limitar altura para evitar que ocupe demasiado en vertical */
    overflow-y: auto; /* Añadir scroll si el contenido es muy largo */
}

#status span { /* Estilo para el texto resaltado dentro de las instrucciones */
    font-size: clamp(15px, 3.8vw, 17px); /* Ligeramente más grande y adaptable */
    font-weight: bold;
    color: #ffdd57; /* Un amarillo más brillante y legible */
}
#camera-capture-container-passp {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
}

#camera-overlay-passp {
    position: relative;
    width: 100%;
    height: 100%;
}

#video-passp {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

#overlay-passp {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

#capture-button-passp {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
    font-size: 18px;
    background-color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
/* NUEVO: Barra de progreso para calibración */
#calibration-progress-container {
    position: absolute;
    /* Se posicionará encima de #status. Ajustar el '65px' y '10px' si el alto de #status cambia significativamente */
    bottom: calc(5% + 65px + 10px); /* 5% (bottom de status) + ~65px (alto estimado de status con padding) + 10px (margen) */
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    max-width: 280px; /* Ancho máximo de la barra */
    height: 10px; /* Altura de la barra */
    background-color: rgba(255, 255, 255, 0.25); /* Fondo de la barra, semitransparente */
    border-radius: 5px; /* Bordes redondeados */
    overflow: hidden; /* Para que la barra interna no se salga */
    z-index: 10; /* Mismo z-index que #status */
    display: none; /* Oculto por defecto, se muestra con JS */
    box-shadow: 0 1px 3px rgba(0,0,0,0.15); /* Sombra sutil */
}

#calibration-progress-bar {
    width: 0%;
    height: 100%;
    background-color: #742ACE; /* Usa tu color primario */
    border-radius: 5px; /* Bordes redondeados para la parte interna también */
    transition: width 0.2s ease-out; /* Transición suave para el llenado */
}
  </style>



  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../../assets/vendors/dropify/dist/dropify.min.css">
  <!-- End fonts -->

	<!-- core:css -->
	<link rel="stylesheet" href="../../../assets/vendors/core/core.css">
  <link rel="stylesheet" href="../../../assets/vendors/core/kyc.css">
	<!-- endinject -->

	<!-- Plugin css for this page -->
	<!-- End plugin css for this page -->

	<!-- inject:css -->
  <link rel="stylesheet" href="../../../assets/vendors/sweetalert2/sweetalert2.min.css">
	<link rel="stylesheet" href="../../../assets/fonts/feather-font/css/iconfont.css">
	<link rel="stylesheet" href="../../../assets/vendors/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="../../../assets/vendors/mdi/css/materialdesignicons.min.css">
	<!-- endinject -->

  <!-- Layout styles -->  
	<link rel="stylesheet" href="../../../assets/css/demo1/style.css">
  <!-- End layout styles -->

  <link rel="shortcut icon" href="../../../assets/images/favicon.png" />
</head>
<body class="vh-100">
    <div class="progress" id="loadingOverlay" style="display: none;">
      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
    </div>



    <div class="vh-100" id="primera">
      <div class="ps-3 pe-3 py-3">
        <svg id="imagen2" width="100%" height="39" viewBox="0 0 194 39" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15.2114 19.0587C16.5447 19.7601 17.1061 20.1306 17.0564 22.4368L17.0572 37.0268C17.0439 37.8529 16.4657 39.0921 15.1146 38.3429L1.22916 30.4539C0.279284 29.8591 -0.0280623 28.9828 0.00198019 28.4169L0.0809401 12.1617C0.0438195 11.7598 0.719697 10.7546 1.93131 11.4933L15.2115 19.0589L15.2114 19.0587Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M20.6889 19.4845C19.3555 20.1859 18.7941 20.5562 18.8438 22.8626L18.8431 37.4525C18.8563 38.2787 19.4345 39.5178 20.7856 38.7687L34.6711 30.8797C35.6209 30.2849 35.9283 29.4085 35.8982 28.8427L35.8193 12.5875C35.8564 12.1856 35.1805 11.1804 33.9689 11.9191L20.6887 19.4847L20.6889 19.4845Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M19.8967 0.687284C18.6134 -0.0994845 18.0072 -0.39309 16.0044 0.802402L3.17675 8.09667C2.45714 8.52104 1.65669 9.63379 2.99083 10.412L16.8697 18.3126C17.8675 18.8256 18.7916 18.6496 19.274 18.3411L33.526 10.1462C33.8978 9.97698 34.4439 8.89769 33.1886 8.23348L19.8969 0.687284H19.8967Z" fill="#742ACE"></path>
          <mask id="path-4-inside-1_737_1627" fill="white">
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z"></path>
          </mask>
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z" fill="#742ACE"></path>
          <path d="M55.4097 17.7974L54.4365 18.0273L54.6184 18.7974H55.4097V17.7974ZM53.5332 14.9263L52.9558 15.7428L52.9597 15.7455L53.5332 14.9263ZM45.1968 15.6543L45.9081 16.3572L45.9102 16.3551L45.1968 15.6543ZM53.5024 25.6724L54.1129 26.4644L54.1136 26.4639L53.5024 25.6724ZM55.584 22.3091V21.3091H54.7788L54.607 22.0957L55.584 22.3091ZM57.1938 22.3091L58.177 22.4921L58.3972 21.3091H57.1938V22.3091ZM44.0381 26.2261L43.3175 26.9195L43.3192 26.9212L44.0381 26.2261ZM56.9478 17.7974V18.7974H58.1054L57.9371 17.652L56.9478 17.7974ZM56.3829 17.5674C56.0383 16.1088 55.2843 14.9314 54.1067 14.107L52.9597 15.7455C53.6961 16.261 54.1932 16.9976 54.4365 18.0273L56.3829 17.5674ZM54.1106 14.1098C52.9461 13.2864 51.5167 12.9111 49.8931 12.9111V14.9111C51.2089 14.9111 52.2062 15.2127 52.9558 15.7428L54.1106 14.1098ZM49.8931 12.9111C47.6988 12.9111 45.8532 13.5591 44.4834 14.9535L45.9102 16.3551C46.8236 15.4253 48.1088 14.9111 49.8931 14.9111V12.9111ZM44.4855 14.9514C43.1159 16.3374 42.4844 18.2041 42.4844 20.4224H44.4844C44.4844 18.5938 44.9945 17.2817 45.9081 16.3572L44.4855 14.9514ZM42.4844 20.4224C42.4844 22.5929 43.0982 24.4343 44.4176 25.835L45.8735 24.4638C44.9779 23.513 44.4844 22.203 44.4844 20.4224H42.4844ZM44.4176 25.835C45.7431 27.2424 47.5063 27.9131 49.5957 27.9131V25.9131C47.9663 25.9131 46.7628 25.408 45.8735 24.4638L44.4176 25.835ZM49.5957 27.9131C51.3176 27.9131 52.8422 27.4437 54.1129 26.4644L52.892 24.8803C52.0162 25.5553 50.9363 25.9131 49.5957 25.9131V27.9131ZM54.1136 26.4639C55.3908 25.4777 56.2062 24.1464 56.5609 22.5225L54.607 22.0957C54.3465 23.2882 53.7742 24.1991 52.8913 24.8809L54.1136 26.4639ZM55.584 23.3091H57.1938V21.3091H55.584V23.3091ZM56.2107 22.1261C55.9012 23.7888 55.1623 25.052 54.0121 25.9815L55.2691 27.5371C56.826 26.279 57.7892 24.5754 58.177 22.4921L56.2107 22.1261ZM54.0121 25.9815C52.861 26.9117 51.424 27.3999 49.6367 27.3999V29.3999C51.8143 29.3999 53.7132 28.7944 55.2691 27.5371L54.0121 25.9815ZM49.6367 27.3999C47.5306 27.3999 45.9401 26.7545 44.757 25.5309L43.3192 26.9212C44.9388 28.5961 47.0807 29.3999 49.6367 29.3999V27.3999ZM44.7587 25.5327C43.5787 24.3065 42.9463 22.6396 42.9463 20.4224H40.9463C40.9463 23.045 41.7084 25.2472 43.3175 26.9195L44.7587 25.5327ZM42.9463 20.4224C42.9463 18.1389 43.5912 16.465 44.7777 15.2728L43.36 13.862C41.7164 15.5136 40.9463 17.7429 40.9463 20.4224H42.9463ZM44.7777 15.2728C45.9626 14.0821 47.6313 13.4346 49.9136 13.4346V11.4346C47.233 11.4346 45.0052 12.2089 43.36 13.862L44.7777 15.2728ZM49.9136 13.4346C51.7048 13.4346 53.0751 13.8677 54.1054 14.6546L55.3194 13.0651C53.8614 11.9516 52.0325 11.4346 49.9136 11.4346V13.4346ZM54.1054 14.6546C55.1245 15.4329 55.7468 16.5029 55.9584 17.9427L57.9371 17.652C57.6565 15.7422 56.7886 14.1872 55.3194 13.0651L54.1054 14.6546ZM56.9478 16.7974H55.4097V18.7974H56.9478V16.7974ZM71.6416 25.2007L70.9303 24.4978L70.9282 24.4999L71.6416 25.2007ZM71.6416 15.644L70.9282 16.3448L70.9324 16.349L71.6416 15.644ZM62.208 15.644L61.4967 14.9412L61.4967 14.9412L62.208 15.644ZM62.208 25.2007L61.4946 25.9014L61.4967 25.9036L62.208 25.2007ZM73.9126 20.4224C73.9126 22.6967 73.2656 24.3671 72.0727 25.56L73.4869 26.9742C75.1377 25.3234 75.9126 23.0972 75.9126 20.4224H73.9126ZM72.0727 25.56C70.8797 26.7529 69.2094 27.3999 66.9351 27.3999V29.3999C69.6099 29.3999 71.8361 28.625 73.4869 26.9742L72.0727 25.56ZM66.9351 27.3999C64.6528 27.3999 62.9841 26.7523 61.7991 25.5617L60.3815 26.9725C62.0267 28.6256 64.2544 29.3999 66.9351 29.3999V27.3999ZM61.7991 25.5617C60.6122 24.369 59.9678 22.6981 59.9678 20.4224H57.9678C57.9678 23.0959 58.7384 25.3214 60.3815 26.9725L61.7991 25.5617ZM59.9678 20.4224C59.9678 18.1389 60.6127 16.465 61.7991 15.2728L60.3815 13.862C58.7379 15.5136 57.9678 17.7429 57.9678 20.4224H59.9678ZM61.7991 15.2728C62.9841 14.0821 64.6528 13.4346 66.9351 13.4346V11.4346C64.2544 11.4346 62.0267 12.2089 60.3815 13.862L61.7991 15.2728ZM66.9351 13.4346C69.2094 13.4346 70.8797 14.0816 72.0727 15.2745L73.4869 13.8603C71.8361 12.2095 69.6099 11.4346 66.9351 11.4346V13.4346ZM72.0727 15.2745C73.2651 16.4669 73.9126 18.1403 73.9126 20.4224H75.9126C75.9126 17.7415 75.1382 15.5116 73.4869 13.8603L72.0727 15.2745ZM66.9351 27.9336C69.1388 27.9336 70.9896 27.2915 72.355 25.9014L70.9282 24.4999C70.024 25.4204 68.7372 25.9336 66.9351 25.9336V27.9336ZM72.3529 25.9036C73.7231 24.517 74.354 22.6464 74.354 20.4224H72.354C72.354 22.2589 71.8433 23.5739 70.9303 24.4978L72.3529 25.9036ZM74.354 20.4224C74.354 18.1928 73.7238 16.3203 72.3508 14.9391L70.9324 16.349C71.8426 17.2647 72.354 18.5777 72.354 20.4224H74.354ZM72.355 14.9433C70.9896 13.5533 69.1388 12.9111 66.9351 12.9111V14.9111C68.7372 14.9111 70.024 15.4243 70.9282 16.3448L72.355 14.9433ZM66.9351 12.9111C64.7254 12.9111 62.8688 13.5527 61.4967 14.9412L62.9193 16.3469C63.8305 15.4249 65.1252 14.9111 66.9351 14.9111V12.9111ZM61.4967 14.9412C60.1316 16.3227 59.5059 18.1945 59.5059 20.4224H61.5059C61.5059 18.576 62.0148 17.2623 62.9193 16.3469L61.4967 14.9412ZM59.5059 20.4224C59.5059 22.6448 60.1323 24.5145 61.4946 25.9014L62.9214 24.4999C62.0141 23.5763 61.5059 22.2605 61.5059 20.4224H59.5059ZM61.4967 25.9036C62.8688 27.2921 64.7254 27.9336 66.9351 27.9336V25.9336C65.1252 25.9336 63.8305 25.4199 62.9193 24.4978L61.4967 25.9036ZM77.7734 28H76.7734V29H77.7734V28ZM77.7734 12.8345V11.8345H76.7734V12.8345H77.7734ZM80.1934 12.8345L81.1001 12.4128L80.8312 11.8345H80.1934V12.8345ZM86.5918 26.5952L85.685 27.0168L86.5853 28.953L87.4962 27.0218L86.5918 26.5952ZM93.0825 12.8345V11.8345H92.4485L92.1781 12.4079L93.0825 12.8345ZM95.3076 12.8345H96.3076V11.8345H95.3076V12.8345ZM95.3076 28V29H96.3076V28H95.3076ZM93.8208 28L92.8208 27.9956L92.8164 29H93.8208V28ZM93.8823 14.1367L94.8823 14.1412L92.9751 13.716L93.8823 14.1367ZM87.4531 28V29H88.0917L88.3603 28.4207L87.4531 28ZM85.71 28L84.8069 28.4295L85.0782 29H85.71V28ZM79.1167 14.1367L80.0198 13.7072L78.1168 14.1478L79.1167 14.1367ZM79.2705 28V29H80.2817L80.2704 27.9889L79.2705 28ZM78.7734 28V12.8345H76.7734V28H78.7734ZM77.7734 13.8345H80.1934V11.8345H77.7734V13.8345ZM79.2866 13.2561L85.685 27.0168L87.4986 26.1736L81.1001 12.4128L79.2866 13.2561ZM87.4962 27.0218L93.987 13.2611L92.1781 12.4079L85.6874 26.1686L87.4962 27.0218ZM93.0825 13.8345H95.3076V11.8345H93.0825V13.8345ZM94.3076 12.8345V28H96.3076V12.8345H94.3076ZM95.3076 27H93.8208V29H95.3076V27ZM94.8208 28.0044L94.8823 14.1412L92.8823 14.1323L92.8208 27.9956L94.8208 28.0044ZM92.9751 13.716L86.5459 27.5793L88.3603 28.4207L94.7895 14.5574L92.9751 13.716ZM87.4531 27H85.71V29H87.4531V27ZM86.613 27.5705L80.0198 13.7072L78.2136 14.5662L84.8069 28.4295L86.613 27.5705ZM78.1168 14.1478L78.2706 28.0111L80.2704 27.9889L80.1166 14.1256L78.1168 14.1478ZM79.2705 27H77.7734V29H79.2705V27ZM98.8965 28H97.8965V29H98.8965V28ZM98.8965 12.8345V11.8345H97.8965V12.8345H98.8965ZM110.555 12.8345H111.555V11.8345H110.555V12.8345ZM110.555 14.2495V15.2495H111.555V14.2495H110.555ZM100.414 14.2495V13.2495H99.4141V14.2495H100.414ZM100.414 19.561H99.4141V20.561H100.414V19.561ZM109.776 19.561H110.776V18.561H109.776V19.561ZM109.776 20.9863V21.9863H110.776V20.9863H109.776ZM100.414 20.9863V19.9863H99.4141V20.9863H100.414ZM100.414 26.5747H99.4141V27.5747H100.414V26.5747ZM110.555 26.5747H111.555V25.5747H110.555V26.5747ZM110.555 28V29H111.555V28H110.555ZM99.8965 28V12.8345H97.8965V28H99.8965ZM98.8965 13.8345H110.555V11.8345H98.8965V13.8345ZM109.555 12.8345V14.2495H111.555V12.8345H109.555ZM110.555 13.2495H100.414V15.2495H110.555V13.2495ZM99.4141 14.2495V19.561H101.414V14.2495H99.4141ZM100.414 20.561H109.776V18.561H100.414V20.561ZM108.776 19.561V20.9863H110.776V19.561H108.776ZM109.776 19.9863H100.414V21.9863H109.776V19.9863ZM99.4141 20.9863V26.5747H101.414V20.9863H99.4141ZM100.414 27.5747H110.555V25.5747H100.414V27.5747ZM109.555 26.5747V28H111.555V26.5747H109.555ZM110.555 27H98.8965V29H110.555V27ZM111.693 28L110.912 27.3759L109.615 29H111.693V28ZM117.917 20.207L118.699 20.8311L119.193 20.2126L118.704 19.5898L117.917 20.207ZM112.134 12.8345V11.8345H110.079L111.347 13.4517L112.134 12.8345ZM114.072 12.8345L114.867 12.2273L114.567 11.8345H114.072V12.8345ZM118.922 19.1816L118.128 19.7888L118.921 20.8264L119.716 19.7904L118.922 19.1816ZM123.793 12.8345V11.8345H123.3L123 12.2257L123.793 12.8345ZM125.68 12.8345L126.46 13.4601L127.763 11.8345H125.68V12.8345ZM119.784 20.1865L119.004 19.5609L118.505 20.1829L119 20.8077L119.784 20.1865ZM125.977 28V29H128.046L126.761 27.3788L125.977 28ZM123.998 28L123.202 28.6052L123.502 29H123.998V28ZM118.861 21.2427L119.657 20.6375L118.865 19.5955L118.068 20.6337L118.861 21.2427ZM113.672 28V29H114.165L114.466 28.609L113.672 28ZM112.475 28.6241L118.699 20.8311L117.136 19.583L110.912 27.3759L112.475 28.6241ZM118.704 19.5898L112.921 12.2173L111.347 13.4517L117.131 20.8242L118.704 19.5898ZM112.134 13.8345H114.072V11.8345H112.134V13.8345ZM113.278 13.4416L118.128 19.7888L119.717 18.5745L114.867 12.2273L113.278 13.4416ZM119.716 19.7904L124.586 13.4433L123 12.2257L118.129 18.5729L119.716 19.7904ZM123.793 13.8345H125.68V11.8345H123.793V13.8345ZM124.9 12.2088L119.004 19.5609L120.564 20.8121L126.46 13.4601L124.9 12.2088ZM119 20.8077L125.193 28.6212L126.761 27.3788L120.567 19.5653L119 20.8077ZM125.977 27H123.998V29H125.977V27ZM124.794 27.3948L119.657 20.6375L118.065 21.8479L123.202 28.6052L124.794 27.3948ZM118.068 20.6337L112.879 27.391L114.466 28.609L119.654 21.8517L118.068 20.6337ZM113.672 27H111.693V29H113.672V27ZM129.433 20.3096H128.433V21.3096H129.433V20.3096ZM137.144 14.9365L136.546 15.7387L136.556 15.746L137.144 14.9365ZM129.433 14.2495V13.2495H128.433V14.2495H129.433ZM127.915 28H126.915V29H127.915V28ZM127.915 12.8345V11.8345H126.915V12.8345H127.915ZM138.302 13.9419L137.675 14.7205L137.678 14.7233L138.302 13.9419ZM138.302 20.689L138.926 21.4704L138.93 21.4676L138.302 20.689ZM129.433 21.7861V20.7861H128.433V21.7861H129.433ZM129.433 28V29H130.433V28H129.433ZM129.433 21.3096H133.821V19.3096H129.433V21.3096ZM133.821 21.3096C135.449 21.3096 136.851 21.0952 137.745 20.4392L136.562 18.8264C136.226 19.0728 135.406 19.3096 133.821 19.3096V21.3096ZM137.745 20.4392C138.719 19.7251 139.077 18.5692 139.077 17.2949H137.077C137.077 18.2355 136.819 18.6382 136.562 18.8264L137.745 20.4392ZM139.077 17.2949C139.077 16.0085 138.716 14.8418 137.731 14.127L136.556 15.746C136.815 15.9336 137.077 16.3392 137.077 17.2949H139.077ZM137.741 14.1344C136.845 13.4678 135.445 13.2495 133.821 13.2495V15.2495C135.397 15.2495 136.211 15.4892 136.546 15.7387L137.741 14.1344ZM133.821 13.2495H129.433V15.2495H133.821V13.2495ZM128.433 14.2495V20.3096H130.433V14.2495H128.433ZM128.915 28V12.8345H126.915V28H128.915ZM127.915 13.8345H134.088V11.8345H127.915V13.8345ZM134.088 13.8345C135.883 13.8345 137.016 14.1899 137.675 14.7205L138.93 13.1633C137.756 12.2174 136.08 11.8345 134.088 11.8345V13.8345ZM137.678 14.7233C138.29 15.2117 138.676 16.0049 138.676 17.3154H140.676C140.676 15.5908 140.147 14.1349 138.926 13.1605L137.678 14.7233ZM138.676 17.3154C138.676 18.6169 138.291 19.4136 137.675 19.9104L138.93 21.4676C140.145 20.4878 140.676 19.0354 140.676 17.3154H138.676ZM137.678 19.9075C137.019 20.4336 135.884 20.7861 134.088 20.7861V22.7861C136.079 22.7861 137.753 22.4072 138.926 21.4704L137.678 19.9075ZM134.088 20.7861H129.433V22.7861H134.088V20.7861ZM128.433 21.7861V28H130.433V21.7861H128.433ZM129.433 27H127.915V29H129.433V27ZM143.275 21.8477L142.363 21.4375L141.729 22.8477H143.275V21.8477ZM150.228 21.8477V22.8477H151.77L151.14 21.4395L150.228 21.8477ZM146.762 14.0957L147.675 13.6875L146.764 11.6517L145.85 13.6855L146.762 14.0957ZM138.907 28L137.999 27.5813L137.345 29H138.907V28ZM145.9 12.8345V11.8345H145.26L144.992 12.4157L145.9 12.8345ZM147.644 12.8345L148.554 12.4198L148.287 11.8345H147.644V12.8345ZM154.555 28V29H156.109L155.465 27.5853L154.555 28ZM153.027 28L152.116 28.4126L152.382 29H153.027V28ZM150.904 23.314L151.815 22.9014L151.549 22.314H150.904V23.314ZM142.609 23.314V22.314H141.967L141.699 22.8981L142.609 23.314ZM140.466 28V29H141.108L141.375 28.4159L140.466 28ZM143.275 22.8477H150.228V20.8477H143.275V22.8477ZM151.14 21.4395L147.675 13.6875L145.849 14.5039L149.315 22.2558L151.14 21.4395ZM145.85 13.6855L142.363 21.4375L144.187 22.2578L147.674 14.5059L145.85 13.6855ZM139.815 28.4187L146.808 13.2532L144.992 12.4157L137.999 27.5813L139.815 28.4187ZM145.9 13.8345H147.644V11.8345H145.9V13.8345ZM146.734 13.2492L153.645 28.4147L155.465 27.5853L148.554 12.4198L146.734 13.2492ZM154.555 27H153.027V29H154.555V27ZM153.938 27.5874L151.815 22.9014L149.993 23.7266L152.116 28.4126L153.938 27.5874ZM150.904 22.314H142.609V24.314H150.904V22.314ZM141.699 22.8981L139.556 27.5841L141.375 28.4159L143.518 23.7299L141.699 22.8981ZM140.466 27H138.907V29H140.466V27ZM160.01 28H159.01V29H160.01V28ZM160.01 21.4478H161.01V21.1115L160.807 20.8435L160.01 21.4478ZM153.478 12.8345V11.8345H151.465L152.681 13.4387L153.478 12.8345ZM155.406 12.8345L156.216 12.248L155.916 11.8345H155.406V12.8345ZM160.758 20.2275L159.948 20.814L160.753 21.9253L161.565 20.8191L160.758 20.2275ZM166.183 12.8345V11.8345H165.676L165.376 12.2429L166.183 12.8345ZM168.049 12.8345L168.846 13.4387L170.062 11.8345H168.049V12.8345ZM161.517 21.4478L160.72 20.8435L160.517 21.1115V21.4478H161.517ZM161.517 28V29H162.517V28H161.517ZM161.01 28V21.4478H159.01V28H161.01ZM160.807 20.8435L154.275 12.2302L152.681 13.4387L159.213 22.052L160.807 20.8435ZM153.478 13.8345H155.406V11.8345H153.478V13.8345ZM154.596 13.4209L159.948 20.814L161.568 19.6411L156.216 12.248L154.596 13.4209ZM161.565 20.8191L166.989 13.426L165.376 12.2429L159.952 19.636L161.565 20.8191ZM166.183 13.8345H168.049V11.8345H166.183V13.8345ZM167.252 12.2302L160.72 20.8435L162.314 22.052L168.846 13.4387L167.252 12.2302ZM160.517 21.4478V28H162.517V21.4478H160.517ZM161.517 27H160.01V29H161.517V27Z" fill="#742ACE" mask="url(#path-4-inside-1_737_1627)"></path>
        </svg>
      </div>
      <div class="ps-3 pe-3 py-3">
        <br/> <br/>
        <h1>Verificacion de identidad</h1>
        <br/><br/>
        <h4 id="primera">Asegurate que:</h4>
        <h4 id="repeticion" style="display: none;">lea los motivos de rechazo en algunos items</h4>
        <br/>
        <p style="color: #61626b;"><i class="mdi mdi-check"></i> El documento a utilizar debe estar en buen estado y claramente visible.</p>
        <p style="color: #61626b;"><i class="mdi mdi-check"></i> Asegúrese de que no haya destellos de luz en el documento.</p>
        <p style="color: #61626b;"><i class="mdi mdi-check"></i> Ponte en un lugar bien iluminado y no te pongas ningun accesorio en el rostro.</p>
      </div>
      <br/> <br/>
      <div class="ps-3 pe-3 py-3">
        <button type="button" id="empezar" class="btn btn-primary w-100 pt-3 pb-3" style="border-radius: 15px; font-size: 18px;"><b>Continuar</b></button>
        <small>Al continuar aceptas nuestra politica de manejo de informacion personal.</small>
      </div>
    </div>

    <div class="vh-100 d-flex flex-column justify-content-between" id="seleccionar" style="display: none !important;">
      <div class="ps-3 pe-3 py-3">
        <svg id="imagen2" width="100%" height="39" viewBox="0 0 194 39" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15.2114 19.0587C16.5447 19.7601 17.1061 20.1306 17.0564 22.4368L17.0572 37.0268C17.0439 37.8529 16.4657 39.0921 15.1146 38.3429L1.22916 30.4539C0.279284 29.8591 -0.0280623 28.9828 0.00198019 28.4169L0.0809401 12.1617C0.0438195 11.7598 0.719697 10.7546 1.93131 11.4933L15.2115 19.0589L15.2114 19.0587Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M20.6889 19.4845C19.3555 20.1859 18.7941 20.5562 18.8438 22.8626L18.8431 37.4525C18.8563 38.2787 19.4345 39.5178 20.7856 38.7687L34.6711 30.8797C35.6209 30.2849 35.9283 29.4085 35.8982 28.8427L35.8193 12.5875C35.8564 12.1856 35.1805 11.1804 33.9689 11.9191L20.6887 19.4847L20.6889 19.4845Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M19.8967 0.687284C18.6134 -0.0994845 18.0072 -0.39309 16.0044 0.802402L3.17675 8.09667C2.45714 8.52104 1.65669 9.63379 2.99083 10.412L16.8697 18.3126C17.8675 18.8256 18.7916 18.6496 19.274 18.3411L33.526 10.1462C33.8978 9.97698 34.4439 8.89769 33.1886 8.23348L19.8969 0.687284H19.8967Z" fill="#742ACE"></path>
          <mask id="path-4-inside-1_737_1627" fill="white">
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z"></path>
          </mask>
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z" fill="#742ACE"></path>
        </svg>
      </div>
      <div style="text-align: center;">
        <img src="../../../assets/images/verificacion.gif" width="80%" alt="">
      </div>
      <div class="ps-3 pe-3 py-3">
        <h1>Verificaremos tu identidad</h1>
        <br/><br/>
        <p style="color: #61626b;">Necesitaremos tomar fotos al documento en el siguiente paso</p>
        <br/>
        <button onclick="seleccion(1)" class="btn d-flex align-items-center justify-content-between" style="background-color: #f8fcff; border: none; border-radius: 8px; padding: 12px 16px; width: 100%; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); color: #000;">
          <div class="d-flex align-items-center">
            <!-- Ícono SVG -->
            <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4.08011 6.12C2.58464 6.12 1.36011 7.34453 1.36011 8.83999V25.16C1.36011 26.6555 2.58464 27.88 4.08011 27.88H29.9201C31.4156 27.88 32.6401 26.6555 32.6401 25.16V8.83999C32.6401 7.34453 31.4156 6.12 29.9201 6.12H4.08011ZM4.08011 7.48H29.9201C30.6798 7.48 31.2801 8.08031 31.2801 8.83999V25.16C31.2801 25.9197 30.6798 26.52 29.9201 26.52H4.08011C3.32042 26.52 2.72011 25.9197 2.72011 25.16V8.83999C2.72011 8.08031 3.32042 7.48 4.08011 7.48ZM11.4964 10.2C9.98761 10.2266 8.92245 10.9411 8.50011 11.9425C8.12558 12.835 8.19995 13.8417 8.41511 14.8112C8.40979 14.8192 8.42042 14.8245 8.41511 14.8325C8.29558 15.037 8.18933 15.3398 8.20261 15.7037C8.2212 16.227 8.41511 16.6202 8.62761 16.8725C8.73917 17.0053 8.78698 17.0186 8.88261 17.085C8.99151 17.4223 9.11104 17.765 9.28636 17.9987C9.40323 18.1555 9.53605 18.2298 9.64761 18.3387C9.65558 18.6283 9.66354 18.8966 9.64761 19.1675C9.59183 19.2764 9.49354 19.3933 9.18011 19.55C8.83745 19.7227 8.33808 19.898 7.82011 20.1237C7.30214 20.3495 6.7523 20.6311 6.29011 21.1012C5.82792 21.5714 5.49058 22.2461 5.44011 23.0775C5.42948 23.2661 5.49589 23.4494 5.62339 23.5848C5.75355 23.723 5.93151 23.8 6.12011 23.8H17.0001C17.1887 23.8 17.3667 23.723 17.4968 23.5848C17.6243 23.4494 17.6907 23.2661 17.6801 23.0775C17.6296 22.2461 17.2923 21.5714 16.8301 21.1012C16.3679 20.6311 15.8181 20.3495 15.3001 20.1237C14.7821 19.898 14.2828 19.7227 13.9401 19.55C13.6134 19.3853 13.4992 19.2578 13.4514 19.1462C13.4381 18.8833 13.4646 18.6203 13.4726 18.3387C13.6001 18.2166 13.7621 18.1395 13.8764 17.9775C14.0437 17.7358 14.1446 17.3931 14.2376 17.0637C14.466 16.8937 14.8964 16.5272 14.8964 15.7675C14.8964 15.4487 14.737 15.2548 14.6414 15.0237C14.8007 14.5005 15.0026 13.7195 14.9176 12.8775C14.8698 12.418 14.7423 11.9452 14.4076 11.5387C14.1314 11.2014 13.6692 11.0155 13.1751 10.9437C12.782 10.5134 12.2348 10.2 11.5176 10.2C11.5096 10.2 11.5043 10.2 11.4964 10.2ZM11.5176 11.56C11.5282 11.56 11.5282 11.56 11.5389 11.56C11.9692 11.5706 12.2587 11.8203 12.3039 11.9C12.4234 12.1045 12.6412 12.2347 12.8776 12.24C13.1831 12.24 13.2575 12.3037 13.3451 12.41C13.4328 12.5162 13.5284 12.7314 13.5576 13.0262C13.616 13.6159 13.4354 14.4314 13.3239 14.7687C13.2468 14.9945 13.2946 15.2469 13.4514 15.4275C13.4434 15.4355 13.5364 15.5895 13.5364 15.7675C13.5364 15.8923 13.3239 16.0862 13.3239 16.0862C13.1539 16.1872 13.0396 16.3598 13.0051 16.5537C12.9732 16.7769 12.875 17.0133 12.7501 17.1912C12.6253 17.3692 12.4579 17.5073 12.4951 17.4887C12.2667 17.6003 12.1179 17.8287 12.1126 18.0837C12.1126 18.4822 12.0621 18.87 12.1126 19.4225C12.1206 19.4809 12.1339 19.5367 12.1551 19.5925C12.3782 20.1875 12.875 20.5248 13.3451 20.7612C13.8153 20.9977 14.296 21.1809 14.7476 21.3775C15.1992 21.5741 15.5896 21.7892 15.8526 22.0575C15.9429 22.1505 15.9562 22.3284 16.0226 22.44H7.09761C7.16401 22.3284 7.17729 22.1505 7.26761 22.0575C7.53058 21.7892 7.92104 21.5741 8.37261 21.3775C8.82417 21.1809 9.30495 20.9977 9.77511 20.7612C10.2453 20.5248 10.7446 20.1902 10.9651 19.5925C10.9864 19.5367 10.9996 19.4809 11.0076 19.4225C11.0581 18.8673 11.0076 18.4822 11.0076 18.0837C11.0103 17.8394 10.8801 17.6109 10.6676 17.4887C10.6782 17.4994 10.6729 17.502 10.6464 17.4887C10.6065 17.4516 10.4737 17.3294 10.3701 17.1912C10.224 16.9973 10.0965 16.7344 10.0726 16.5537C10.0381 16.3306 9.89464 16.1394 9.69011 16.0437C9.69011 16.0437 9.71401 16.0544 9.66886 16.0012C9.6237 15.9481 9.57058 15.8658 9.56261 15.64C9.55995 15.5709 9.62636 15.47 9.62636 15.47C9.79636 15.2973 9.86276 15.045 9.79636 14.8112C9.55729 13.8922 9.52542 13.0156 9.75386 12.4737C9.97964 11.9372 10.3807 11.5866 11.5176 11.56ZM19.5926 12.92C19.2181 12.9545 18.9418 13.2892 18.9764 13.6637C19.0109 14.0383 19.3456 14.3145 19.7201 14.28H27.8801C28.1245 14.2827 28.3529 14.1552 28.4778 13.9427C28.5999 13.7302 28.5999 13.4698 28.4778 13.2573C28.3529 13.0448 28.1245 12.9173 27.8801 12.92H19.7201C19.6989 12.92 19.6776 12.92 19.6564 12.92C19.6351 12.92 19.6139 12.92 19.5926 12.92ZM19.5926 16.32C19.2181 16.3545 18.9418 16.6892 18.9764 17.0637C19.0109 17.4383 19.3456 17.7145 19.7201 17.68H27.8801C28.1245 17.6827 28.3529 17.5552 28.4778 17.3427C28.5999 17.1302 28.5999 16.8698 28.4778 16.6573C28.3529 16.4448 28.1245 16.3173 27.8801 16.32H19.7201C19.6989 16.32 19.6776 16.32 19.6564 16.32C19.6351 16.32 19.6139 16.32 19.5926 16.32ZM19.5926 19.72C19.2181 19.7545 18.9418 20.0892 18.9764 20.4637C19.0109 20.8383 19.3456 21.1145 19.7201 21.08H27.8801C28.1245 21.0827 28.3529 20.9552 28.4778 20.7427C28.5999 20.5302 28.5999 20.2698 28.4778 20.0573C28.3529 19.8448 28.1245 19.7173 27.8801 19.72H19.7201C19.6989 19.72 19.6776 19.72 19.6564 19.72C19.6351 19.72 19.6139 19.72 19.5926 19.72Z" fill="black"/>
            </svg>                 
            <!-- Texto -->
            <div>
              <div style="font-weight: 600; font-size: 16px; margin-left: 6px;">Cedula</div>
            </div>
          </div>
          <!-- Flecha -->
          <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000" viewBox="0 0 16 16">
              <path d="M4.646 14.354a.5.5 0 0 1-.708-.708l6-6a.5.5 0 0 1 0-.708l-6-6a.5.5 0 1 1 .708-.708l6.707 6.707a.5.5 0 0 1 0 .708l-6.707 6.707z" />
            </svg>
          </div>
        </button>
        <br/>
        <button onclick="seleccion(2)" class="btn d-flex align-items-center justify-content-between" style="background-color: #f8fcff; border: none; border-radius: 8px; padding: 12px 16px; width: 100%; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); color: #000;">
          <div class="d-flex align-items-center">
            <!-- Ícono SVG -->
            <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6.12008 0.680054C5.0018 0.680054 4.08008 1.60177 4.08008 2.72005V31.2801C4.08008 32.3983 5.0018 33.3201 6.12008 33.3201H27.8801C28.9984 33.3201 29.9201 32.3983 29.9201 31.2801V2.72005C29.9201 1.60177 28.9984 0.680054 27.8801 0.680054H6.12008ZM6.12008 2.04005H27.8801C28.2573 2.04005 28.5601 2.34287 28.5601 2.72005V31.2801C28.5601 31.6572 28.2573 31.9601 27.8801 31.9601H6.12008C5.74289 31.9601 5.44008 31.6572 5.44008 31.2801V2.72005C5.44008 2.34287 5.74289 2.04005 6.12008 2.04005ZM17.0001 6.12005C12.8882 6.12005 9.52008 9.48818 9.52008 13.6001C9.52008 17.7119 12.8882 21.0801 17.0001 21.0801C21.112 21.0801 24.4801 17.7119 24.4801 13.6001C24.4801 9.48818 21.112 6.12005 17.0001 6.12005ZM16.3201 7.69255V12.9201H14.3226C14.4023 11.4166 14.7157 10.0566 15.1938 9.09505C15.5365 8.40177 15.9323 7.93958 16.3201 7.69255ZM17.6801 7.69255C18.0679 7.93958 18.4637 8.40177 18.8063 9.09505C19.2845 10.0566 19.5979 11.4166 19.6776 12.9201H17.6801V7.69255ZM14.1526 8.1813C14.0941 8.2849 14.0357 8.39115 13.9826 8.50005C13.3876 9.69802 13.021 11.2307 12.9413 12.9201H10.9226C11.1537 10.8694 12.4021 9.10568 14.1526 8.1813ZM19.8476 8.1813C21.598 9.10568 22.8465 10.8694 23.0776 12.9201H21.0588C20.9791 11.2307 20.6126 9.69802 20.0176 8.50005C19.9645 8.39115 19.906 8.2849 19.8476 8.1813ZM10.9226 14.2801H12.9413C13.021 15.9694 13.3876 17.5021 13.9826 18.7001C14.0357 18.809 14.0941 18.9152 14.1526 19.0188C12.4021 18.0944 11.1537 16.3307 10.9226 14.2801ZM14.3226 14.2801H16.3201V19.5076C15.9323 19.2605 15.5365 18.7983 15.1938 18.1051C14.7157 17.1435 14.4023 15.7835 14.3226 14.2801ZM17.6801 14.2801H19.6776C19.5979 15.7835 19.2845 17.1435 18.8063 18.1051C18.4637 18.7983 18.0679 19.2605 17.6801 19.5076V14.2801ZM21.0588 14.2801H23.0776C22.8465 16.3307 21.598 18.0944 19.8476 19.0188C19.906 18.9152 19.9645 18.809 20.0176 18.7001C20.6126 17.5021 20.9791 15.9694 21.0588 14.2801ZM8.71258 25.8401C8.33805 25.8746 8.0618 26.2093 8.09633 26.5838C8.13086 26.9583 8.46555 27.2346 8.84008 27.2001H25.1601C25.4045 27.2027 25.6329 27.0752 25.7577 26.8627C25.8799 26.6502 25.8799 26.3899 25.7577 26.1774C25.6329 25.9649 25.4045 25.8374 25.1601 25.8401H8.84008C8.81883 25.8401 8.79758 25.8401 8.77633 25.8401C8.75508 25.8401 8.73383 25.8401 8.71258 25.8401Z" fill="black"/>
              </svg>
            <!-- Texto -->
            <div>
              <div style="font-weight: 600; font-size: 16px; margin-left: 6px;">Passport</div>
            </div>
          </div>
          <!-- Flecha -->
          <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000" viewBox="0 0 16 16">
              <path d="M4.646 14.354a.5.5 0 0 1-.708-.708l6-6a.5.5 0 0 1 0-.708l-6-6a.5.5 0 1 1 .708-.708l6.707 6.707a.5.5 0 0 1 0 .708l-6.707 6.707z" />
            </svg>
          </div>
        </button>
      </div>
    </div>

    <div class="vh-100 d-flex flex-column justify-content-between" id="ced_front" style="display: none !important;">
      <div class="ps-3 pe-3 py-3">
        <svg id="imagen2" width="100%" height="39" viewBox="0 0 194 39" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15.2114 19.0587C16.5447 19.7601 17.1061 20.1306 17.0564 22.4368L17.0572 37.0268C17.0439 37.8529 16.4657 39.0921 15.1146 38.3429L1.22916 30.4539C0.279284 29.8591 -0.0280623 28.9828 0.00198019 28.4169L0.0809401 12.1617C0.0438195 11.7598 0.719697 10.7546 1.93131 11.4933L15.2115 19.0589L15.2114 19.0587Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M20.6889 19.4845C19.3555 20.1859 18.7941 20.5562 18.8438 22.8626L18.8431 37.4525C18.8563 38.2787 19.4345 39.5178 20.7856 38.7687L34.6711 30.8797C35.6209 30.2849 35.9283 29.4085 35.8982 28.8427L35.8193 12.5875C35.8564 12.1856 35.1805 11.1804 33.9689 11.9191L20.6887 19.4847L20.6889 19.4845Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M19.8967 0.687284C18.6134 -0.0994845 18.0072 -0.39309 16.0044 0.802402L3.17675 8.09667C2.45714 8.52104 1.65669 9.63379 2.99083 10.412L16.8697 18.3126C17.8675 18.8256 18.7916 18.6496 19.274 18.3411L33.526 10.1462C33.8978 9.97698 34.4439 8.89769 33.1886 8.23348L19.8969 0.687284H19.8967Z" fill="#742ACE"></path>
          <mask id="path-4-inside-1_737_1627" fill="white">
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z"></path>
          </mask>
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z" fill="#742ACE"></path>
        </svg>
      </div>
      <div style="text-align: center;">






        <!-- HTML -->
        <div id="camera-capture-container" style="display: none; width: 100%;">
          <div id="camera-overlay" style="width: 100%;">
            <video id="video2" playsinline webkit-playsinline autoplay muted style="width: 100%;"></video>
            <canvas id="overlay" style="width: 100%;"></canvas>
            <button id="capture-button" onclick="capturar(event)">Capturar</button>
          </div>
        </div>





        <div id="primer_form" style="display: none;">
          <input onchange="reviFront()" type="file" id="frontal" style="display: none;" capture="environment" name="frontal"/>
        </div>
        <div id="primer_formInfo">
          <lottie-player src="../../../assets/images/ocrFront.json" background="transparent" speed="1" style="width: 100%" loop autoplay></lottie-player>
          <h4>Toma una foto de la parte frontal de tu cedula</h4>
        </div>
      </div>
      <div class="ps-3 pe-3 py-3" id="block_cedFront">
        <!--<button type="button" id="fileButton1" class="btn btn-primary w-100 pt-3 pb-3" style="border-radius: 15px; font-size: 18px;"><b>Tomar foto</b></button>-->
        <button type="button" id="open-camera" class="btn btn-primary w-100 pt-3 pb-3" style="border-radius: 15px; font-size: 18px;"><b>Tomar foto</b></button>
        <br/><br/>
      </div>
      <div class="ps-3 pe-3 py-3" id="block_cedFront2" style="display: none;">
        <button type="button" id="cedPass2" class="btn btn-primary w-100 pt-3 pb-3" style="border-radius: 15px; font-size: 18px;"><b>Continuar </b></button>
        <br/><br/>
      </div>
    </div>

    <div class="vh-100 d-flex flex-column justify-content-between" id="ced_trase" style="display: none !important;">
      <div class="ps-3 pe-3 py-3">
        <svg id="imagen2" width="100%" height="39" viewBox="0 0 194 39" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15.2114 19.0587C16.5447 19.7601 17.1061 20.1306 17.0564 22.4368L17.0572 37.0268C17.0439 37.8529 16.4657 39.0921 15.1146 38.3429L1.22916 30.4539C0.279284 29.8591 -0.0280623 28.9828 0.00198019 28.4169L0.0809401 12.1617C0.0438195 11.7598 0.719697 10.7546 1.93131 11.4933L15.2115 19.0589L15.2114 19.0587Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M20.6889 19.4845C19.3555 20.1859 18.7941 20.5562 18.8438 22.8626L18.8431 37.4525C18.8563 38.2787 19.4345 39.5178 20.7856 38.7687L34.6711 30.8797C35.6209 30.2849 35.9283 29.4085 35.8982 28.8427L35.8193 12.5875C35.8564 12.1856 35.1805 11.1804 33.9689 11.9191L20.6887 19.4847L20.6889 19.4845Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M19.8967 0.687284C18.6134 -0.0994845 18.0072 -0.39309 16.0044 0.802402L3.17675 8.09667C2.45714 8.52104 1.65669 9.63379 2.99083 10.412L16.8697 18.3126C17.8675 18.8256 18.7916 18.6496 19.274 18.3411L33.526 10.1462C33.8978 9.97698 34.4439 8.89769 33.1886 8.23348L19.8969 0.687284H19.8967Z" fill="#742ACE"></path>
          <mask id="path-4-inside-1_737_1627" fill="white">
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z"></path>
          </mask>
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z" fill="#742ACE"></path>
        </svg>
      </div>
      <div style="text-align: center;">


        <div id="camera-capture-container-back" style="display: none;">
          <div id="camera-overlay-back">
            <video id="video-back" playsinline webkit-playsinline autoplay muted></video>
            <canvas id="overlay-back"></canvas>
            <button id="capture-button-back" onclick="capturar2(event)">Capturar</button>
          </div>
      </div>

        <div style="display: none;">
          <input onchange="reviBack()" type="file" id="trasera" style="display: none;" capture="environment" name="trasera"/>
        </div>  
        
        <div id="segun_formInfo">
          <lottie-player src="../../../assets/images/ocrBack.json" background="transparent" speed="1" style="width: 100%" loop autoplay></lottie-player>
          <h4>Toma una foto de la parte trasera de tu cedula</h4>
        </div>
      </div>
      <div class="ps-3 pe-3 py-3">
        <div class="ps-3 pe-3 py-3" id="block_cedBack">
          <button type="button" id="open-camera-back" class="btn btn-primary w-100 pt-3 pb-3" style="border-radius: 15px; font-size: 18px;"><b>Tomar foto</b></button>
          <br/><br/>
        </div>
        <div class="ps-3 pe-3 py-3" id="block_cedBack2" style="display: none;">
          <button type="button" onclick="veri_rostro()" id="terminar" class="btn btn-primary w-100 pt-3 pb-3" style="border-radius: 15px; font-size: 18px;"><b>Continuar</b></button>
          <br/><br/>
        </div>
      </div>
    </div>

    <div class="vh-100 d-flex flex-column justify-content-between" id="caj_pasapor" style="display: none !important;">
      <div class="ps-3 pe-3 py-3">
        <svg id="imagen2" width="100%" height="39" viewBox="0 0 194 39" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15.2114 19.0587C16.5447 19.7601 17.1061 20.1306 17.0564 22.4368L17.0572 37.0268C17.0439 37.8529 16.4657 39.0921 15.1146 38.3429L1.22916 30.4539C0.279284 29.8591 -0.0280623 28.9828 0.00198019 28.4169L0.0809401 12.1617C0.0438195 11.7598 0.719697 10.7546 1.93131 11.4933L15.2115 19.0589L15.2114 19.0587Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M20.6889 19.4845C19.3555 20.1859 18.7941 20.5562 18.8438 22.8626L18.8431 37.4525C18.8563 38.2787 19.4345 39.5178 20.7856 38.7687L34.6711 30.8797C35.6209 30.2849 35.9283 29.4085 35.8982 28.8427L35.8193 12.5875C35.8564 12.1856 35.1805 11.1804 33.9689 11.9191L20.6887 19.4847L20.6889 19.4845Z" fill="#742ACE"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M19.8967 0.687284C18.6134 -0.0994845 18.0072 -0.39309 16.0044 0.802402L3.17675 8.09667C2.45714 8.52104 1.65669 9.63379 2.99083 10.412L16.8697 18.3126C17.8675 18.8256 18.7916 18.6496 19.274 18.3411L33.526 10.1462C33.8978 9.97698 34.4439 8.89769 33.1886 8.23348L19.8969 0.687284H19.8967Z" fill="#742ACE"></path>
          <mask id="path-4-inside-1_737_1627" fill="white">
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z"></path>
          </mask>
          <path d="M55.4097 17.7974C55.1157 16.5532 54.4902 15.5962 53.5332 14.9263C52.5762 14.2495 51.3628 13.9111 49.8931 13.9111C47.9038 13.9111 46.3384 14.4922 45.1968 15.6543C44.0552 16.8096 43.4844 18.3989 43.4844 20.4224C43.4844 22.3979 44.0381 23.9736 45.1455 25.1494C46.2529 26.3252 47.7363 26.9131 49.5957 26.9131C51.127 26.9131 52.4292 26.4995 53.5024 25.6724C54.5825 24.8384 55.2764 23.7173 55.584 22.3091H57.1938C56.8452 24.1821 55.9941 25.6655 54.6406 26.7593C53.2871 27.853 51.6191 28.3999 49.6367 28.3999C47.3057 28.3999 45.4395 27.6753 44.0381 26.2261C42.6436 24.7769 41.9463 22.8423 41.9463 20.4224C41.9463 17.9409 42.6538 15.9893 44.0688 14.5674C45.4839 13.1455 47.4321 12.4346 49.9136 12.4346C51.8687 12.4346 53.4683 12.9097 54.7124 13.8599C55.9565 14.8101 56.7017 16.1226 56.9478 17.7974H55.4097ZM74.9126 20.4224C74.9126 22.897 74.2017 24.8452 72.7798 26.2671C71.3579 27.689 69.4097 28.3999 66.9351 28.3999C64.4536 28.3999 62.5054 27.689 61.0903 26.2671C59.6753 24.8452 58.9678 22.897 58.9678 20.4224C58.9678 17.9409 59.6753 15.9893 61.0903 14.5674C62.5054 13.1455 64.4536 12.4346 66.9351 12.4346C69.4097 12.4346 71.3579 13.1455 72.7798 14.5674C74.2017 15.9893 74.9126 17.9409 74.9126 20.4224ZM66.9351 26.9336C68.938 26.9336 70.5068 26.356 71.6416 25.2007C72.7832 24.0454 73.354 22.4526 73.354 20.4224C73.354 18.3853 72.7832 16.7925 71.6416 15.644C70.5068 14.4888 68.938 13.9111 66.9351 13.9111C64.9253 13.9111 63.3496 14.4888 62.208 15.644C61.0732 16.7925 60.5059 18.3853 60.5059 20.4224C60.5059 22.4526 61.0732 24.0454 62.208 25.2007C63.3496 26.356 64.9253 26.9336 66.9351 26.9336ZM77.7734 28V12.8345H80.1934L86.5918 26.5952L93.0825 12.8345H95.3076V28H93.8208L93.8823 14.1367L87.4531 28H85.71L79.1167 14.1367L79.2705 28H77.7734ZM98.8965 28V12.8345H110.555V14.2495H100.414V19.561H109.776V20.9863H100.414V26.5747H110.555V28H98.8965ZM111.693 28L117.917 20.207L112.134 12.8345H114.072L118.922 19.1816L123.793 12.8345H125.68L119.784 20.1865L125.977 28H123.998L118.861 21.2427L113.672 28H111.693ZM129.433 20.3096H133.821C135.428 20.3096 136.539 20.084 137.154 19.6328C137.769 19.1816 138.077 18.4023 138.077 17.2949C138.077 16.1738 137.766 15.3877 137.144 14.9365C136.528 14.4785 135.421 14.2495 133.821 14.2495H129.433V20.3096ZM127.915 28V12.8345H134.088C135.981 12.8345 137.386 13.2036 138.302 13.9419C139.218 14.6733 139.676 15.7979 139.676 17.3154C139.676 18.8262 139.218 19.9507 138.302 20.689C137.386 21.4204 135.981 21.7861 134.088 21.7861H129.433V28H127.915ZM143.275 21.8477H150.228L146.762 14.0957L143.275 21.8477ZM138.907 28L145.9 12.8345H147.644L154.555 28H153.027L150.904 23.314H142.609L140.466 28H138.907ZM160.01 28V21.4478L153.478 12.8345H155.406L160.758 20.2275L166.183 12.8345H168.049L161.517 21.4478V28H160.01Z" fill="#742ACE"></path>
        </svg>
      </div>
      <div style="text-align: center;">
        <div id="camera-capture-container-passp" style="display: none;">
          <div id="camera-overlay-passp">
            <video id="video-passp" playsinline webkit-playsinline autoplay muted></video>
            <canvas id="overlay-passp"></canvas>
            <button id="capture-button-passp" onclick="capturar3(event)">Capture</button>
          </div>
      </div>


      <div style="text-align: center;">
          <input onchange="veripassP()" type="file" id="pasaporte" style="display: none;" capture="environment" name="pasaporte"/>
        <div id="tercer_formInfo">
          <lottie-player src="../../../assets/images/ocrPassport.json" background="transparent" speed="1" style="width: 100%" loop autoplay></lottie-player>
          <h4>Toma una foto del pasaporte</h4>
        </div>
      </div>
      <div class="ps-3 pe-3 py-3">
        <div class="ps-3 pe-3 py-3" id="block_pass">
          <button type="button" id="fileButton3" class="btn btn-primary w-100 pt-3 pb-3" style="border-radius: 15px; font-size: 18px;"><b>Tomar foto</b></button>
          <br/><br/>
        </div>
        <div class="ps-3 pe-3 py-3" id="block_pass2" style="display: none;">
          <button type="button" onclick="veri_rostro()" id="veri_rostro" class="btn btn-primary w-100 pt-3 pb-3" style="border-radius: 15px; font-size: 18px;"><b>Continuar</b></button>
          <br/><br/>
        </div>
      </div>
    </div>
	<!--<div class="main-wrapper">
	
		<div class="page-wrapper" id="paso1">

			<div class="page-content">
        <div class="row">
          <div class="col-md-1 middle-wrapper"></div>
          <div class="col-md-10 middle-wrapper">
            <div class="row">
              <div class="col-md-12 grid-margin">
                    <div class="d-flex align-items-center justify-content-between">
                      <div class="d-flex align-items-center">										
                        <div class="ms-2">
                          <h3>Verificacion de identidad</h3>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div id="instrucciones">
                              <h4 id="primera">Asegurate que:</h4>
                              <h4 id="repeticion" style="display: none;">lea los motivos de rechazo en algunos items</h4>
                              <br/>
                              <p><i class="mdi mdi-check"></i> El documento debe estar en buen estado y claramente visible.</p>
                              <p><i class="mdi mdi-check"></i> Asegúrese de que no haya destellos de luz en el documento.</p>
                              <br/>
                            </div>
                            <div id="cedulaFront">
                              <p><b>Cargue la cara frontal del documento</b></p>
                              <div id="blockRechazo1" style="display: none;">
                                <p><b>Motivo de rechazo:</b></p>
                                <p id="motivo1"></p>
                              </div>
                              <div class="row">
                                  <div class="col-md-4 d-block d-md-none" style="text-align: center;">
                                      <img class="img-fluid" width="160" src="../../../assets/images/frontal.png" alt="documento frontal">
                                  </div>
                                  <div class="col-md-8">
                                      <input type="file" id="frontal" capture="environment" name="frontal"/>
                                  </div>
                                  <div class="col-md-4 d-none d-md-block" style="text-align: center;">
                                      <img class="img-fluid" width="160" src="../../../assets/images/frontal.png" alt="documento frontal">
                                  </div>
                                  <button type="button" style="display: none;" onclick="continuar1()" id="continuar1" class="btn btn-primary">Continuar</button>
                              </div>
                            </div>
                            
                            <div id="cedulaBack" style="display: none;">
                              <p><b>Cargue la cara trasera del documento</b></p>
                              <div id="blockRechazo2" style="display: none;">
                                <p><b>Motivo de rechazo:</b></p>
                                <p id="motivo2"></p>
                              </div>
                              <div class="row">
                                  <div class="col-md-4 d-block d-md-none" style="text-align: center;">
                                      <img class="img-fluid" width="160" src="../../../assets/images/trasero.png" alt="documento trasero">
                                  </div>
                                  <div class="col-md-8">
                                      <input type="file" id="trasera" capture="environment" name="trasera"/>
                                  </div>
                                  <div class="col-md-4 d-none d-md-block" style="text-align: center;">
                                      <img class="img-fluid" width="160" src="../../../assets/images/trasero.png" alt="documento trasero">
                                  </div>
                                  <button type="button" style="display: none;" onclick="continuar2()" id="continuar2" class="btn btn-primary">Continuar</button>
                              </div>
                            </div>
                            <div id="selfieCont" style="display: none;">
                              <h4><b>Vamos a verificar tu rostro</b></h4>
                              <div id="blockRechazo3" style="display: none;">
                                <p><b>Motivo de rechazo:</b></p>
                                <p id="motivo3"></p>
                              </div>
                              <div class="row">
                                <button type="button" onclick="continuar()" class="btn btn-primary">Continuar</button>
                              </div>
                            </div>
                        </div>
                    </div>
              </div>
            </div>
          </div>
          <div class="col-md-1 middle-wrapper"></div>
        </div>
         <br/><br/><br/><br/>
        <footer class="footer d-flex flex-column flex-md-row align-items-center justify-content-between px-4 py-3 border-top small">
          <p class="text-muted mb-1 mb-md-0">Copyright © 2022 <a href="https://www.nobleui.com" target="_blank">NobleUI</a>.</p>
          <p class="text-muted">Handcrafted With <i class="mb-1 text-primary ms-1 icon-sm" data-feather="heart"></i></p>
        </footer>
        </div>


			</div>


	
		</div>-->
	</div>

  <div id="paso2" style="display: none;" class="vh-100">
    <div id="video-container">
      <video id="video" playsinline webkit-playsinline autoplay muted></video>
      <canvas id="overlayCanvas" style="position: absolute; top: 0; left: 0; transform: scaleX(-1); pointer-events: none; width: auto !important; height: auto !important;"></canvas>
      <button id="startButton" type="button">Iniciar verificación</button>
      <p id="status">Esperando prueba...</p>
      <div id="calibration-progress-container">
      <div id="calibration-progress-bar"></div>
  </div>
  </div>
    <div id="uploadingMessage">
        <div>Enviando los datos...</div>
        <div id="uploadingProgress"></div>
    </div>
  </div>



	<!-- core:js -->
  <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
  <script>eruda.init();</script>
  <script src="https://cdn.jsdelivr.net/npm/core-js-bundle@3.35.1/minified.min.js"></script>

  <script src="https://evanw.github.io/glfx.js/glfx.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pica/8.0.0/pica.min.js"></script>
	<script src="../../../assets/vendors/core/core.js"></script>
  <script src="../../../assets/vendors/sweetalert2/sweetalert2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="../../../assets/vendors/dropify/dist/dropify.min.js"></script>
	<!-- endinject -->

	<!-- Plugin js for this page -->
	<!-- End plugin js for this page -->

	<!-- inject:js -->
	<script src="../../../assets/vendors/feather-icons/feather.min.js"></script>
	<script src="../../../assets/js/template.js"></script>

  <!--Codigo captura parte frontal de la cedula y revision-->
  <script src="../../../assets/js/kyc/cedFront.js"></script>

  <!--Codigo captura parte traasera de la cedula y revision-->
  <script src="../../../assets/js/kyc/cedBack.js"></script>

  <!--Codigo captura pasaporte y revision-->
  <script src="../../../assets/js/kyc/passport.js"></script>

	<!-- endinject -->

	<!-- Custom js for this page -->
    <script src="../../../assets/js/dropify.js"></script>
	<!-- End custom js for this page -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <!--<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@0.10.3/face_mesh.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.10.3/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/face-landmarks-detection"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>-->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  

  <script>
    // Polyfill manual para WebGL y requestAnimationFrame
    if (!window.requestAnimationFrame) {
      window.requestAnimationFrame = (callback) => {
        return setTimeout(callback, 1000 / 60);
      };
    }

    if (!window.WebGLRenderingContext) {
      document.getElementById("status").textContent = 
        "Error: Se requiere WebGL (actualice su navegador)";
    }

    const fileButton1 = document.getElementById('fileButton1');
    //const fileButton2 = document.getElementById('fileButton2');
    const fileButton3 = document.getElementById('fileButton3');
    frontal = document.getElementById('frontal');
    const empezar = document.getElementById('empezar');
    const cedPass2 = document.getElementById('cedPass2');

    

    /*fileButton3.addEventListener('click', () => {
      pasaporte.click();
    });*/
    empezar.addEventListener('click', () => {
      const primera = document.getElementById('primera');
      primera.style.setProperty('display', 'none', 'important');
      const seleccionar = document.getElementById('seleccionar');
      seleccionar.style.setProperty('display', 'flex', 'important');
    });


    function seleccion(opcion){
      if(opcion == 1){
        const seleccionar = document.getElementById('seleccionar');
        seleccionar.style.setProperty('display', 'none', 'important');
        const ced_front = document.getElementById('ced_front');
        ced_front.style.setProperty('display', 'flex', 'important');
        localStorage.opcion = 0;
      }
      if(opcion == 2){
        const seleccionar = document.getElementById('seleccionar');
        seleccionar.style.setProperty('display', 'none', 'important');
        const caj_pasapor = document.getElementById('caj_pasapor');
        caj_pasapor.style.setProperty('display', 'flex', 'important');
        localStorage.opcion = 1;
      }
    }
    cedPass2.addEventListener('click', () => {
      const ced_front = document.getElementById('ced_front');
      ced_front.style.setProperty('display', 'none', 'important');
      const ced_trase = document.getElementById('ced_trase');
      ced_trase.style.setProperty('display', 'flex', 'important');
    });
    function veri_rostro(){
      const ced_trase = document.getElementById('ced_trase');
      ced_trase.style.setProperty('display', 'none', 'important');
      const caj_pasapor = document.getElementById('caj_pasapor');
      caj_pasapor.style.setProperty('display', 'none', 'important');
      let paso2 = document.querySelector('#paso2');
      paso2.style.display = 'block';
    }

    function continuar1(){
      $('#cedulaFront').hide();
      $('#cedulaBack').show();
    }

    function continuar2(){
      $('#cedulaBack').hide();
      $('#selfieCont').show();
      $('#instrucciones').hide();
    }
    function reviBack(){
      $('#segun_form').show(); // Mostrar el botón
      $('#segun_formInfo').hide();
      $('#block_cedBack').hide();
      $('#block_cedBack2').show();
      $('#terminar').hide();
      const file = fileInputBack.files[0];

      const formData = new FormData();
      formData.append('back', file);
      $('#loadingOverlay').show();

      try {
        axios.post("https://api.comexpay.co/api/v1/comexpayRoutes/veriBack", formData, {headers: { 'Content-Type': 'multipart/form-data'}})
        .then(function(res) {
          $('#loadingOverlay').hide();
          if(res.data.data == 1){
            localStorage.veri=0
            //setupCamera();
            //detectFace(); // Comenzamos a detectar la cara
            const ced_trase = document.getElementById('ced_trase');
            ced_trase.style.setProperty('display', 'none', 'important');
            const caj_pasapor = document.getElementById('caj_pasapor');
            caj_pasapor.style.setProperty('display', 'none', 'important');
            let paso2 = document.querySelector('#paso2');
            paso2.style.display = 'block';
            iniciarFeDeVida();
          }
          if(res.data.data == 0){
            const fileInput = $('#trasera');

            // Limpia el valor del input
            fileInput.val('');

            // Destruye la instancia actual de Dropify
            fileInput.data('dropify').destroy();

            // Reinstancia Dropify para restablecer la interfaz
            fileInput.dropify();
 
            //document.querySelector('input[type="file"]').value = '';  // Limpiar el input file
            alert('El archivo no es válido, por favor sube otro.');
            $('#segun_form').hide();
            $('#segun_formInfo').show();
            $('#block_cedBack').show();
            $('#block_cedBack2').hide();
          }
          else
          console.log(res.data.data)
        }).catch(function(err){
          $('#loadingOverlay').hide();
          console.log(err)
        })
      } catch (error) {
          $('#loadingOverlay').hide();
          console.error(error);
          alert('Ocurrió un error al procesar el documento.');
      }
    }

    function veripassP(){
      $('#tercer_form').show(); // Mostrar el botón
      $('#tercer_formInfo').hide();
      $('#block_pass').hide();
      $('#block_pass2').show();
      $('#veri_rostro').hide();
      console.log("entrando")
      //const file = fileInputPassp.files[0];

      $('#loadingOverlay').show();
      const ced_trase = document.getElementById('ced_trase');
      ced_trase.style.setProperty('display', 'none', 'important');
      const caj_pasapor = document.getElementById('caj_pasapor');
      caj_pasapor.style.setProperty('display', 'none', 'important');
      let paso2 = document.querySelector('#paso2');
      paso2.style.display = 'block';
      localStorage.veri=1
      iniciarFeDeVida();
      $('#loadingOverlay').hide();

    }
  </script>

<script type="module">
// Script de Prueba de Vida con MediaPipe FaceLandmarker (Malla Alineada Correctamente)

import vision from 'https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/+esm'; 
const { FaceLandmarker, FilesetResolver, DrawingUtils } = vision;

// Elementos del DOM
const video = document.getElementById("video"); 
const statusText = document.getElementById("status"); 
const startButton = document.getElementById("startButton");
const overlayCanvas = document.getElementById("overlayCanvas");
const calibrationProgressContainer = document.getElementById("calibration-progress-container");
const calibrationProgressBar = document.getElementById("calibration-progress-bar");
let canvasCtx = null;
let drawingUtilsInstance = null;

let stream2 = null;
let faceLandmarkerInstance = null;
let faceLandmarkerInitialized = false;
let faceLandmarkerInitializationPromise = null;
let calibratedCenterAngles = null;

let awaitingFaceFrameCounter = 0;
const MAX_AWAITING_FACE_FRAMES_MEDIAPIPE = 75;
const CALIBRATION_DROPOUT_TOLERANCE_FRAMES = 12;
const TRACKING_DROPOUT_TOLERANCE_FRAMES = 18;
const HEAD_POSE_SMOOTHING_ALPHA = 0.35;

let loopCallCount = 0;
let lastVideoTime = -1;
let currentRunningMode= "IMAGE";
let trackingDropoutFrames = 0;
let smoothedAngles = null;

const HEAD_POSE_CHALLENGE_STATE = {
    NONE: 'none',
    LOADING_MODELS: 'loading_models',
    AWAITING_FACE: 'awaiting_face',
    CALIBRATING_CENTER: 'calibrating_center',
    CHALLENGE_PENDING: 'challenge_pending',
    VERIFYING_POSE: 'verifying_pose',
    CHALLENGE_SUCCESS: 'challenge_success',
    ALL_CHALLENGES_PASSED: 'all_challenges_passed',
    CHALLENGE_FAILED_ATTEMPT: 'challenge_failed_attempt',
    CHALLENGE_FAILED_FINAL: 'challenge_failed_final'
};
let currentChallengeState = HEAD_POSE_CHALLENGE_STATE.NONE;
const CHALLENGE_SEQUENCE = ['CENTER', 'RIGHT', 'LEFT', 'UP', 'DOWN'];
let currentChallengeIndex = 0;

const FRAMES_TO_PERFORM_ACTION = 150; 
const FRAMES_POSE_MUST_BE_HELD = 5;  
let poseVerificationFrames = 0;
let poseAttemptTimer = 0;

const YAW_THRESHOLD_DEGREES = 13; 
const PITCH_THRESHOLD_DEGREES = 10;
const OFF_AXIS_TOLERANCE_DEGREES = 15; 

let livenessAttempts = 0;
const MAX_LIVENESS_ATTEMPTS = 3;
const CALIBRATION_FRAMES_HEAD_POSE = 30; 
let calibrationFramesCount_HeadPose = 0;
let collectedCalibrationAngles = [];
let livenessFlowFinalized = false;
let snapshotInProgress = false;

function showStartButton(label = "Iniciar verificación") {
    if (!startButton) return;
    startButton.style.display = 'flex';
    startButton.disabled = false;
    startButton.textContent = label;
}

function hideStartButton() {
    if (!startButton) return;
    startButton.style.display = 'none';
}

async function getUserMediaWithFallback() {
    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        throw new Error('Navegador sin soporte para cámara.');
    }

    const constraintsList = [
        { video: { facingMode: { ideal: "user" }, width: { ideal: 640 }, height: { ideal: 480 } } },
        { video: { facingMode: "user" } },
        { video: true }
    ];

    let lastError = null;
    for (const constraints of constraintsList) {
        try {
            return await navigator.mediaDevices.getUserMedia(constraints);
        } catch (error) {
            lastError = error;
            console.warn('[MEDIAPIPE_CAMERA] Falla con constraints', constraints, error);
        }
    }

    throw lastError || new Error('No fue posible acceder a la cámara.');
}

if (startButton) {
    startButton.addEventListener('click', async () => {
        if (startButton.disabled) return;
        startButton.disabled = true;
        startButton.textContent = 'Iniciando...';

        if (!faceLandmarkerInstance || !faceLandmarkerInitialized) {
            startButton.textContent = 'Cargando modelos...';
            const modelsInitialized = await initializeMediaPipeTask();
            if (!modelsInitialized) {
                showStartButton('Reintentar verificación');
                return;
            }
            startButton.textContent = 'Iniciando...';
        }

        await startCameraInternal();
    });
}

function adjustCanvasToVideo() {
    if (!video || !overlayCanvas ) {
        return;
    }
    if (!video.videoWidth || !video.videoHeight || video.videoWidth === 0 || video.videoHeight === 0) {
        if (loopCallCount > 0 && loopCallCount % 150 === 1) console.log("[ADJUST_CANVAS] Esperando dimensiones válidas del video...");
        return;
    }

    const videoEl = video;
    const canvasEl = overlayCanvas;
    const container = document.getElementById('video-container'); 

    if (!container) {
        console.error("[ADJUST_CANVAS] Contenedor #video-container no encontrado.");
        return;
    }

    // 1. Establecer los atributos de resolución del canvas (superficie de dibujo)
    //    para que coincidan con la resolución intrínseca del video.
    if (canvasEl.width !== videoEl.videoWidth) {
        canvasEl.width = videoEl.videoWidth;
    }
    if (canvasEl.height !== videoEl.videoHeight) {
        canvasEl.height = videoEl.videoHeight;
    }
    
    const containerWidth = container.clientWidth;
    const containerHeight = container.clientHeight;

    if (containerWidth === 0 || containerHeight === 0) {
        if (loopCallCount > 0 && loopCallCount % 150 === 1) console.warn("[ADJUST_CANVAS] El contenedor tiene dimensiones cero.");
        return;
    }
    
    // Calcular la escala necesaria para que el video cubra el contenedor manteniendo su relación de aspecto
    const scaleX = containerWidth / videoEl.videoWidth;
    const scaleY = containerHeight / videoEl.videoHeight;
    const scale = Math.max(scaleX, scaleY); // Esta es la escala de 'cover'

    // Dimensiones visuales del video (y por lo tanto del canvas) escalado
    const styledWidth = videoEl.videoWidth * scale;
    const styledHeight = videoEl.videoHeight * scale;

    // Calcular los desplazamientos para centrar el video/canvas escalado dentro del contenedor
    const offsetX = (containerWidth - styledWidth) / 2;
    const offsetY = (containerHeight - styledHeight) / 2;

    // Aplicar estilos CSS al elemento canvas para su visualización
    if (styledWidth > 0 && styledHeight > 0) {
        canvasEl.style.width = `${Math.round(styledWidth)}px`;
        canvasEl.style.height = `${Math.round(styledHeight)}px`;
        canvasEl.style.top = `${Math.round(offsetY)}px`;
        canvasEl.style.left = `${Math.round(offsetX)}px`;
    }

    if (loopCallCount > 0 && loopCallCount % 150 === 0) { 
        console.log(`[ADJUST_CANVAS] Video Intrinsic: ${videoEl.videoWidth}x${videoEl.videoHeight} (AR: ${(videoEl.videoWidth/videoEl.videoHeight).toFixed(2)})`);
        console.log(`[ADJUST_CANVAS] Container: ${containerWidth}x${containerHeight} (AR: ${(containerWidth/containerHeight).toFixed(2)})`);
        console.log(`[ADJUST_CANVAS] Scale: ${scale.toFixed(2)} (scaleX: ${scaleX.toFixed(2)}, scaleY: ${scaleY.toFixed(2)})`);
        console.log(`[ADJUST_CANVAS] Canvas Attrs (drawing): ${canvasEl.width}x${canvasEl.height}`);
        console.log(`[ADJUST_CANVAS] Canvas Style (display): W=${canvasEl.style.width}, H=${canvasEl.style.height}, L=${canvasEl.style.left}, T=${canvasEl.style.top}`);
    }
}


async function initializeMediaPipeTask() {
    if (faceLandmarkerInitialized && faceLandmarkerInstance) {
        return true;
    }
    if (faceLandmarkerInitializationPromise) {
        try {
            await faceLandmarkerInitializationPromise;
        } catch (error) {
            console.error('[MEDIAPIPE_LOAD] Error durante inicialización concurrente:', error);
        }
        return faceLandmarkerInitialized;
    }

    faceLandmarkerInitializationPromise = (async () => {
    currentChallengeState = HEAD_POSE_CHALLENGE_STATE.LOADING_MODELS;
    updateInstruction();

    try {
        console.log("[MEDIAPIPE_LOAD] Iniciando inicialización de MediaPipe FaceLandmarker v0.10.3...");
        
        if (overlayCanvas) {
            canvasCtx = overlayCanvas.getContext("2d");
            if (canvasCtx) {
                drawingUtilsInstance = new DrawingUtils(canvasCtx); 
                console.log("[MEDIAPIPE_LOAD] DrawingUtils inicializado.");
            } else {
                console.error("[MEDIAPIPE_LOAD] No se pudo obtener el contexto 2D del overlayCanvas.");
            }
        } else {
            console.warn("[MEDIAPIPE_LOAD] Elemento overlayCanvas no encontrado. No se dibujará la malla.");
        }

        const wasmPath = "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/wasm";
        console.log(`[MEDIAPIPE_LOAD] Creando FilesetResolver para WASM desde: ${wasmPath}`);
        const filesetResolver = await FilesetResolver.forVisionTasks(wasmPath);
        console.log("[MEDIAPIPE_LOAD] FilesetResolver para WASM creado exitosamente.");
        
        const modelAssetPath = `https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task`;
        console.log(`[MEDIAPIPE_LOAD] Definiendo opciones para FaceLandmarker (delegate: CPU, modelAssetPath: ${modelAssetPath}, initial runningMode: ${currentRunningMode})...`);
        const faceLandmarkerOptions = {
            baseOptions: {
                modelAssetPath: modelAssetPath,
                delegate: "CPU" 
            },
            outputFaceBlendshapes: true, 
            outputFacialTransformationMatrixes: true, 
            outputFaceLandmarks: true, 
            runningMode: currentRunningMode, 
            numFaces: 1,
            minDetectionConfidence: 0.35,
            minTrackingConfidence: 0.35
        };
        console.log("[MEDIAPIPE_LOAD] Opciones de FaceLandmarker:", faceLandmarkerOptions);
        
        console.log("[MEDIAPIPE_LOAD] ANTES de FaceLandmarker.createFromOptions()...");
        faceLandmarkerInstance = await FaceLandmarker.createFromOptions(filesetResolver, faceLandmarkerOptions);
        console.log("[MEDIAPIPE_LOAD] DESPUÉS de FaceLandmarker.createFromOptions() - MediaPipe FaceLandmarker inicializado exitosamente.");
        faceLandmarkerInitialized = true;

        if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.LOADING_MODELS) {
            currentChallengeState = HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE;
            smoothedAngles = null;
            trackingDropoutFrames = 0;
            updateInstruction();
        }
        return true;
    } catch (error) {
        console.error("[MEDIAPIPE_LOAD] Error CRÍTICO GENERAL al inicializar MediaPipe FaceLandmarker:", error);
        if (statusText) statusText.textContent = "Error crítico al cargar modelos de IA. Intenta recargar o verifica la consola.";
        faceLandmarkerInitialized = false;
        currentChallengeState = HEAD_POSE_CHALLENGE_STATE.NONE;
        smoothedAngles = null;
        trackingDropoutFrames = 0;
        updateInstruction();
        if (startButton && startButton.disabled) startButton.disabled = false;
        return false;
    }
    })();

    try {
        const result = await faceLandmarkerInitializationPromise;
        return result;
    } finally {
        faceLandmarkerInitializationPromise = null;
    }
}

async function startCameraInternal() {
    if (!video || !statusText) { console.error("[MEDIAPIPE_CAMERA] Elementos de video o status no encontrados."); if(startButton) startButton.disabled = false; return;}

    if (!faceLandmarkerInitialized || !faceLandmarkerInstance) {
        console.error("[MEDIAPIPE_CAMERA] FaceLandmarker no está inicializado. No se puede iniciar la cámara para detección.");
        if(statusText) statusText.textContent = "Error: Componente de IA no listo.";
        return;
    }

    console.log(`[MEDIAPIPE_CAMERA] Iniciando. FaceLandmarker listo: ${faceLandmarkerInitialized}, Estado actual: ${currentChallengeState}`);
    updateInstruction();
    livenessAttempts = 0; currentChallengeIndex = 0; calibratedCenterAngles = null;
    calibrationFramesCount_HeadPose = 0; collectedCalibrationAngles = [];
    poseAttemptTimer = 0; poseVerificationFrames = 0; awaitingFaceFrameCounter = 0;
    trackingDropoutFrames = 0; smoothedAngles = null;
    livenessFlowFinalized = false; snapshotInProgress = false;
    try {
        if (stream2) { stream2.getTracks().forEach(track => track.stop()); stream2 = null; }
        stream2 = await getUserMediaWithFallback();
        video.srcObject = stream2; video.style.display = "block";
        if (video.hasAttribute('muted') === false) { video.setAttribute('muted', ''); }
        video.muted = true;
        video.setAttribute('playsinline', '');
        if(startButton) hideStartButton();

        video.onloadedmetadata = () => {
            adjustCanvasToVideo();

            video.play().then(async () => {
                console.log(`[MEDIAPIPE_CAMERA] Video metadata cargado y reproduciendo. Resolución real: ${video.videoWidth}x${video.videoHeight}`);
                
                if (currentRunningMode === "IMAGE") {
                    console.log("[MEDIAPIPE_CAMERA] Cambiando runningMode a VIDEO...");
                    currentRunningMode = "VIDEO";
                    await faceLandmarkerInstance.setOptions({ runningMode: currentRunningMode });
                    console.log("[MEDIAPIPE_CAMERA] runningMode cambiado a VIDEO.");
                }
                
                updateInstruction(); 
                lastVideoTime = -1; 
                console.log("[MEDIAPIPE_CAMERA] Video listo. Iniciando bucle de detección MediaPipe.");
                detectFaceLandmarksLoopMediaPipe(); 
            }).catch(playError => { console.error("[MEDIAPIPE_CAMERA] Error al reproducir video:", playError); if(statusText) statusText.textContent = "Error al reproducir video."; if(startButton) { showStartButton('Reintentar verificación'); startButton.disabled = false; } stopCamera(); });
        };
        video.onerror = (e) => { console.error("[MEDIAPIPE_CAMERA] Error en el elemento video:", e); if(statusText) statusText.textContent = "Error con el stream de video."; stopCamera();};
    } catch (err) {
        console.error("[MEDIAPIPE_CAMERA] Error al acceder a la cámara: ", err);
        if(statusText) {
            if (err && err.name === 'NotAllowedError') {
                statusText.textContent = 'Permite el acceso a la cámara para continuar.';
            } else {
                statusText.textContent = `Error al acceder a la cámara. Verifica permisos.`;
            }
        }
        currentChallengeState = HEAD_POSE_CHALLENGE_STATE.NONE; updateInstruction();
        if(startButton) {
            showStartButton(err && err.name === 'NotAllowedError' ? 'Abrir cámara' : 'Reintentar verificación');
        }
    }
}

function detectFaceLandmarksLoopMediaPipe() {
    if (livenessFlowFinalized) {
        console.log("[MEDIAPIPE_LOOP] Flujo finalizado; no se procesan más frames.");
        return;
    }
    if (!faceLandmarkerInstance || !faceLandmarkerInitialized) { 
        console.log("[MEDIAPIPE_LOOP] FaceLandmarkerInstance no inicializado o modelos no completamente cargados. Deteniendo bucle.");
        return;
    }
    loopCallCount++;
    if (loopCallCount <= 5 || loopCallCount % 60 === 0) { 
        console.log(`[MEDIAPIPE_LOOP] #${loopCallCount} - Estado: ${currentChallengeState}, FaceLandmarker listo: ${faceLandmarkerInitialized}, Video (W: ${video?.videoWidth}, H: ${video?.videoHeight}, State: ${video?.readyState}, Time: ${video?.currentTime?.toFixed(2)}), Stream: ${video?.srcObject?.active}`);
    }

    let shouldRequestNextFrame = true; 

    try {
        if (!video || video.paused || video.ended || !stream2 || !video.srcObject || !video.srcObject.active ||
            currentChallengeState === HEAD_POSE_CHALLENGE_STATE.ALL_CHALLENGES_PASSED ||
            currentChallengeState === HEAD_POSE_CHALLENGE_STATE.CHALLENGE_FAILED_FINAL) {
            console.log(`[MEDIAPIPE_LOOP] Deteniendo: Condición de parada. VPaused: ${video?.paused}, VEnded: ${video?.ended}, Stream: ${!!stream2}, SActive: ${video?.srcObject?.active}, Estado: ${currentChallengeState}`);
            shouldRequestNextFrame = false;
            if (currentChallengeState !== HEAD_POSE_CHALLENGE_STATE.ALL_CHALLENGES_PASSED &&
                currentChallengeState !== HEAD_POSE_CHALLENGE_STATE.CHALLENGE_FAILED_FINAL) {
                 if(startButton) {
                    showStartButton('Reintentar verificación');
                 }
            }
            if (canvasCtx) canvasCtx.clearRect(0, 0, overlayCanvas.width, overlayCanvas.height); 
            return;
        }

        if (!faceLandmarkerInitialized) { return; } 
        
        if (video.readyState < video.HAVE_ENOUGH_DATA || video.videoWidth === 0 || video.videoHeight === 0) {
            if (loopCallCount % 60 === 0) console.log(`[MEDIAPIPE_LOOP] Video no tiene suficientes datos. Esperando.`);
            return; 
        }
        
        adjustCanvasToVideo(); 

        if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE) {
            awaitingFaceFrameCounter++;
            if (awaitingFaceFrameCounter % 15 === 0) { 
                console.log(`[MEDIAPIPE_LOOP] AWAITING_FACE intento de detección #${awaitingFaceFrameCounter}/${MAX_AWAITING_FACE_FRAMES_MEDIAPIPE}`);
            }
            if (awaitingFaceFrameCounter > MAX_AWAITING_FACE_FRAMES_MEDIAPIPE) {
                console.warn(`[MEDIAPIPE_LOOP] Timeout en AWAITING_FACE tras ${MAX_AWAITING_FACE_FRAMES_MEDIAPIPE} intentos.`);
                if(statusText) statusText.textContent = "No se pudo detectar un rostro. Verifica tu iluminación, posición y cámara. Intenta recargar.";
                currentChallengeState = HEAD_POSE_CHALLENGE_STATE.CHALLENGE_FAILED_FINAL;
                updateInstruction(); setTimeout(stopCamera, 4000);
                shouldRequestNextFrame = false; return;
            }
        } else {
            awaitingFaceFrameCounter = 0;
        }

        if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.VERIFYING_POSE && calibratedCenterAngles) {
            poseAttemptTimer++;
            if (poseAttemptTimer >= FRAMES_TO_PERFORM_ACTION) { 
                livenessAttempts++;
                console.log(`[MEDIAPIPE_LOOP] Timeout para desafío ${CHALLENGE_SEQUENCE[currentChallengeIndex]}. Intento ${livenessAttempts} fallido.`);
                if (livenessAttempts >= MAX_LIVENESS_ATTEMPTS) { 
                    currentChallengeState = HEAD_POSE_CHALLENGE_STATE.CHALLENGE_FAILED_FINAL; updateInstruction(); 
                    setTimeout(stopCamera, 2000); shouldRequestNextFrame = false; return;
                } else { 
                    currentChallengeState = HEAD_POSE_CHALLENGE_STATE.CHALLENGE_FAILED_ATTEMPT; updateInstruction();
                    setTimeout(() => {
                        currentChallengeState = HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE;
                        currentChallengeIndex = 0; calibratedCenterAngles = null;
                        calibrationFramesCount_HeadPose = 0; collectedCalibrationAngles = [];
                        poseAttemptTimer = 0; awaitingFaceFrameCounter = 0;
                        smoothedAngles = null; trackingDropoutFrames = 0;
                        updateInstruction();
                    }, 2500);
                }
            }
        }
        
        let results = null;
        if (video.currentTime !== lastVideoTime && video.videoWidth > 0 && video.videoHeight > 0) { 
            const frameDetectionStartTime = performance.now();
            results = faceLandmarkerInstance.detectForVideo(video, frameDetectionStartTime);
            lastVideoTime = video.currentTime;
            const frameDetectionDuration = (performance.now() - frameDetectionStartTime).toFixed(0);
            if (loopCallCount % 30 === 0) { 
                 console.log(`[MEDIAPIPE_LOOP_DETECT] #${loopCallCount}: detectForVideo tomó ${frameDetectionDuration}ms.`);
            }
        }

        if (canvasCtx) {
            canvasCtx.clearRect(0, 0, overlayCanvas.width, overlayCanvas.height);
        }

        if (results && results.faceLandmarks && results.faceLandmarks.length > 0) {
            trackingDropoutFrames = 0;
            if (canvasCtx && drawingUtilsInstance) {
                for (const landmarks of results.faceLandmarks) {
                    drawingUtilsInstance.drawConnectors(landmarks, FaceLandmarker.FACE_LANDMARKS_TESSELATION, {color: '#7546F870', lineWidth: 1});
                    drawingUtilsInstance.drawConnectors(landmarks, FaceLandmarker.FACE_LANDMARKS_RIGHT_EYE, {color: '#7546F870'});
                    drawingUtilsInstance.drawConnectors(landmarks, FaceLandmarker.FACE_LANDMARKS_RIGHT_EYEBROW, {color: '#7546F870'});
                    drawingUtilsInstance.drawConnectors(landmarks, FaceLandmarker.FACE_LANDMARKS_LEFT_EYE, {color: '#7546F870'});
                    drawingUtilsInstance.drawConnectors(landmarks, FaceLandmarker.FACE_LANDMARKS_LEFT_EYEBROW, {color: '#7546F870'});
                    drawingUtilsInstance.drawConnectors(landmarks, FaceLandmarker.FACE_LANDMARKS_FACE_OVAL, {color: '#7546F870'});
                    drawingUtilsInstance.drawConnectors(landmarks, FaceLandmarker.FACE_LANDMARKS_LIPS, {color: '#7546F870'});
                }
            }

            if (results.facialTransformationMatrixes && results.facialTransformationMatrixes.length > 0) {
                awaitingFaceFrameCounter = 0; 
                const matrixData = results.facialTransformationMatrixes[0].data; 
                processDetectedFaceMediaPipe(matrixData);
            } else {
                 if (currentChallengeState !== HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE && loopCallCount % 30 === 0) {
                    console.log(`[MEDIAPIPE_LOOP] Landmarks detectados, pero no se encontró matriz facial en estado ${currentChallengeState}.`);
                }
            }
        } else {
            trackingDropoutFrames++;
            if (currentChallengeState !== HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE && loopCallCount % 30 === 0) {
                console.log(`[MEDIAPIPE_LOOP] No se detectaron landmarks en estado ${currentChallengeState}. Misses=${trackingDropoutFrames}`);
            }

            if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.CALIBRATING_CENTER) {
                if (trackingDropoutFrames >= CALIBRATION_DROPOUT_TOLERANCE_FRAMES) {
                    console.warn(`[MEDIAPIPE_CALIBRATION] Pérdida del rostro por ${trackingDropoutFrames} frames. Reiniciando calibración.`);
                    calibrationFramesCount_HeadPose = 0;
                    collectedCalibrationAngles = [];
                    calibratedCenterAngles = null;
                    smoothedAngles = null;
                    currentChallengeState = HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE;
                    trackingDropoutFrames = 0;
                    updateInstruction();
                }
            } else if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.VERIFYING_POSE ||
                       currentChallengeState === HEAD_POSE_CHALLENGE_STATE.CHALLENGE_PENDING) {
                if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.VERIFYING_POSE) {
                    poseVerificationFrames = 0;
                    poseAttemptTimer = Math.max(0, poseAttemptTimer - 5);
                }
                if (trackingDropoutFrames >= TRACKING_DROPOUT_TOLERANCE_FRAMES) {
                    console.warn(`[MEDIAPIPE_TRACKING] Seguimiento perdido durante desafío por ${trackingDropoutFrames} frames. Volviendo a calibrar.`);
                    poseVerificationFrames = 0;
                    poseAttemptTimer = 0;
                    currentChallengeIndex = 0;
                    calibratedCenterAngles = null;
                    calibrationFramesCount_HeadPose = 0;
                    collectedCalibrationAngles = [];
                    smoothedAngles = null;
                    currentChallengeState = HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE;
                    trackingDropoutFrames = 0;
                    updateInstruction();
                }
            }
        }

    } catch (error) {
        console.error("[MEDIAPIPE_LOOP] Error en el bucle de detección MediaPipe:", error);
    } finally {
        if (shouldRequestNextFrame) {
            requestAnimationFrame(detectFaceLandmarksLoopMediaPipe);
        } else {
            console.log("[MEDIAPIPE_LOOP] No se solicitará el siguiente frame (bucle detenido).");
        }
    }
}

function getAnglesFromMatrix(matrixData) {
    let pitch, yaw, roll;
    pitch = Math.atan2(matrixData[9], matrixData[10]);
    const sinYaw = -matrixData[8];
    if (Math.abs(sinYaw) >= 1) {
        yaw = Math.PI / 2 * Math.sign(sinYaw);
    } else {
        yaw = Math.asin(sinYaw);
    }
    roll = Math.atan2(matrixData[4], matrixData[0]); 

    return {
        pitch: pitch * (180 / Math.PI),
        yaw: yaw * (180 / Math.PI),
        roll: roll * (180 / Math.PI)
    };
}

function smoothAngles(newAngles) {
    if (!smoothedAngles) {
        smoothedAngles = { ...newAngles };
        return { ...smoothedAngles };
    }

    smoothedAngles = {
        yaw: smoothedAngles.yaw + HEAD_POSE_SMOOTHING_ALPHA * (newAngles.yaw - smoothedAngles.yaw),
        pitch: smoothedAngles.pitch + HEAD_POSE_SMOOTHING_ALPHA * (newAngles.pitch - smoothedAngles.pitch),
        roll: smoothedAngles.roll + HEAD_POSE_SMOOTHING_ALPHA * (newAngles.roll - smoothedAngles.roll)
    };

    return { ...smoothedAngles };
}

function processDetectedFaceMediaPipe(matrixData) {
    const rawAngles = getAnglesFromMatrix(matrixData);
    const stableAngles = smoothAngles(rawAngles);
    if (loopCallCount % 15 === 0) {
        console.log(`[MEDIAPIPE_PROCESS] Ángulos: Yaw=${rawAngles.yaw.toFixed(1)}, Pitch=${rawAngles.pitch.toFixed(1)}, Roll=${rawAngles.roll.toFixed(1)} | Suavizados: Yaw=${stableAngles.yaw.toFixed(1)}, Pitch=${stableAngles.pitch.toFixed(1)}, Roll=${stableAngles.roll.toFixed(1)}`);
    }

    // ---- INICIO DE LA MODIFICACIÓN ----
    // NUEVO: Transición de AWAITING_FACE a CALIBRATING_CENTER si se encuentra un rostro.
    if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE) {
        currentChallengeState = HEAD_POSE_CHALLENGE_STATE.CALIBRATING_CENTER;
        calibrationFramesCount_HeadPose = 0; // Reiniciar contador de frames de calibración
        collectedCalibrationAngles = [];     // Limpiar ángulos recolectados previamente
        calibratedCenterAngles = null;       // Asegurarse de que los ángulos calibrados se reinicien
        console.log("[MEDIAPIPE_PROCESS] Rostro detectado, transicionando a CALIBRATING_CENTER.");
        updateInstruction(); // Esto debería mostrar "Calibrando..."
    }
    // ---- FIN DE LA MODIFICACIÓN ----

    if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.CALIBRATING_CENTER) {
        // updateInstruction() ya fue llamado si entró por la nueva lógica de arriba,
        // pero si ya estaba en CALIBRATING_CENTER, actualiza el progreso.
        if (!collectedCalibrationAngles) collectedCalibrationAngles = []; // Asegurar que el array exista

        collectedCalibrationAngles.push(stableAngles);
        calibrationFramesCount_HeadPose++;
        updateInstruction(); // Actualiza el mensaje con el progreso de la calibración

        if (calibrationFramesCount_HeadPose >= CALIBRATION_FRAMES_HEAD_POSE) {
            let avgYaw = 0, avgPitch = 0, avgRoll = 0;
            collectedCalibrationAngles.forEach(a => {
                avgYaw += a.yaw; avgPitch += a.pitch; avgRoll += a.roll;
            });
            calibratedCenterAngles = {
                yaw: avgYaw / collectedCalibrationAngles.length,
                pitch: avgPitch / collectedCalibrationAngles.length,
                roll: avgRoll / collectedCalibrationAngles.length
            };
            console.log("[MEDIAPIPE_PROCESS] Ángulos centrales calibrados:", calibratedCenterAngles);
            currentChallengeState = HEAD_POSE_CHALLENGE_STATE.CHALLENGE_PENDING; // Listo para el primer desafío real
            currentChallengeIndex = 0; // Comenzar con el primer desafío en la secuencia (verificación de 'CENTER')
            poseAttemptTimer = 0; poseVerificationFrames = 0;
            updateInstruction(); // Esto mostrará la instrucción para CHALLENGE_SEQUENCE[0] (ej. "Verificando centro...")
        }
        return; // Importante retornar aquí para no ejecutar el resto de la lógica en el mismo frame de calibración
    }

    if (!calibratedCenterAngles &&
        (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.VERIFYING_POSE || currentChallengeState === HEAD_POSE_CHALLENGE_STATE.CHALLENGE_PENDING)) {
        console.warn("[MEDIAPIPE_PROCESS] calibratedCenterAngles no definido. Reiniciando a AWAITING_FACE.");
        currentChallengeState = HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE;
        awaitingFaceFrameCounter = 0; smoothedAngles = null; trackingDropoutFrames = 0;
        updateInstruction();
        return;
    }

    if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.CHALLENGE_PENDING) {
        currentChallengeState = HEAD_POSE_CHALLENGE_STATE.VERIFYING_POSE;
        poseAttemptTimer = 0; poseVerificationFrames = 0;
        updateInstruction();
    }

    if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.VERIFYING_POSE && calibratedCenterAngles) {
        const currentTargetChallenge = CHALLENGE_SEQUENCE[currentChallengeIndex];
        let poseDetected = false;

        // Calcula los deltas con los ángulos suavizados para evitar parpadeos
        const smoothedDeltaYaw = stableAngles.yaw - calibratedCenterAngles.yaw;
        const smoothedDeltaPitch = stableAngles.pitch - calibratedCenterAngles.pitch;

        // Invierte los deltas para corregir la detección invertida
        const deltaYaw = -smoothedDeltaYaw;
        const deltaPitch = -smoothedDeltaPitch;

        // Puedes mantener o añadir un log para depuración si lo deseas:
        if (loopCallCount % 30 === 0) {
            const rawDeltaYaw = rawAngles.yaw - calibratedCenterAngles.yaw;
            const rawDeltaPitch = rawAngles.pitch - calibratedCenterAngles.pitch;
            console.log(`[MEDIAPIPE_VERIFY] RawDeltas: dYaw=${rawDeltaYaw.toFixed(1)}, dPitch=${rawDeltaPitch.toFixed(1)} | Suavizados: dYaw=${smoothedDeltaYaw.toFixed(1)}, dPitch=${smoothedDeltaPitch.toFixed(1)}`);
            console.log(`[MEDIAPIPE_VERIFY] CorrectedDeltas: dYaw=${deltaYaw.toFixed(1)}, dPitch=${deltaPitch.toFixed(1)} (Target: ${currentTargetChallenge})`);
        }

        // El resto de la lógica del switch (case 'CENTER', 'RIGHT', 'LEFT', 'UP', 'DOWN')
        // utilizará estos nuevos deltaYaw y deltaPitch invertidos,
        // y las condiciones originales (< -THRESHOLD, > THRESHOLD) deberían ahora funcionar correctamente.
        switch (currentTargetChallenge) {
            case 'CENTER':
                // Asegúrate que aquí también uses los deltas corregidos si es necesario,
                // aunque para el centro es una comprobación de magnitud.
                // La condición original es: Math.abs(rawDeltaYaw) < YAW_THRESHOLD_DEGREES * 0.7 && Math.abs(rawDeltaPitch) < PITCH_THRESHOLD_DEGREES * 0.7
                // Esta debería seguir funcionando bien con los deltas originales (rawDeltaYaw, rawDeltaPitch) ya que es simétrica.
                // O si prefieres consistencia, usa los deltas invertidos, pero el Math.abs() lo hará igual.
                if (Math.abs(smoothedDeltaYaw) < YAW_THRESHOLD_DEGREES * 0.7 && Math.abs(smoothedDeltaPitch) < PITCH_THRESHOLD_DEGREES * 0.7) {
                    poseDetected = true;
                }
                break;
            case 'RIGHT': 
                // La condición original era: deltaYaw < -YAW_THRESHOLD_DEGREES
                // Con deltaYaw = -rawDeltaYaw, esto se vuelve: -rawDeltaYaw < -YAW_THRESHOLD_DEGREES => rawDeltaYaw > YAW_THRESHOLD_DEGREES
                // Esto significa que un giro físico a la derecha (que produce un rawDeltaYaw positivo) ahora cumplirá la condición.
                if (deltaYaw < -YAW_THRESHOLD_DEGREES && Math.abs(deltaPitch/*o rawDeltaPitch para el eje secundario*/) < OFF_AXIS_TOLERANCE_DEGREES) {
                    poseDetected = true;
                }
                break;
            case 'LEFT':  
                // Original: deltaYaw > YAW_THRESHOLD_DEGREES
                // Con deltaYaw = -rawDeltaYaw, se vuelve: -rawDeltaYaw > YAW_THRESHOLD_DEGREES => rawDeltaYaw < -YAW_THRESHOLD_DEGREES
                if (deltaYaw > YAW_THRESHOLD_DEGREES && Math.abs(deltaPitch/*o rawDeltaPitch*/) < OFF_AXIS_TOLERANCE_DEGREES) {
                    poseDetected = true;
                }
                break;
            case 'UP': 
                // Original: deltaPitch < -PITCH_THRESHOLD_DEGREES
                // Con deltaPitch = -rawDeltaPitch, se vuelve: -rawDeltaPitch < -PITCH_THRESHOLD_DEGREES => rawDeltaPitch > PITCH_THRESHOLD_DEGREES
                // Si tu `getAnglesFromMatrix` da pitch positivo para ARRIBA, esto ahora funcionará.
                if (deltaPitch < -PITCH_THRESHOLD_DEGREES && Math.abs(deltaYaw/*o rawDeltaYaw*/) < OFF_AXIS_TOLERANCE_DEGREES) {
                    poseDetected = true;
                }
                break;
            case 'DOWN': 
                // Original: deltaPitch > PITCH_THRESHOLD_DEGREES
                // Con deltaPitch = -rawDeltaPitch, se vuelve: -rawDeltaPitch > PITCH_THRESHOLD_DEGREES => rawDeltaPitch < -PITCH_THRESHOLD_DEGREES
                if (deltaPitch > PITCH_THRESHOLD_DEGREES && Math.abs(deltaYaw/*o rawDeltaYaw*/) < OFF_AXIS_TOLERANCE_DEGREES) {
                    poseDetected = true;
                }
                break;
        }

        if (poseDetected) {
            poseVerificationFrames++;
            if (poseVerificationFrames >= FRAMES_POSE_MUST_BE_HELD) {
                console.log(`[MEDIAPIPE_VERIFY] Desafío ${currentTargetChallenge} SUPERADO.`);
                currentChallengeIndex++;
                currentChallengeState = HEAD_POSE_CHALLENGE_STATE.CHALLENGE_SUCCESS;
                updateInstruction();
                setTimeout(() => {
                    if (currentChallengeIndex >= CHALLENGE_SEQUENCE.length) {
                        currentChallengeState = HEAD_POSE_CHALLENGE_STATE.ALL_CHALLENGES_PASSED;
                        livenessFlowFinalized = true;
                        console.log("[MEDIAPIPE_VERIFY] Todos los desafíos superados.");
                        updateInstruction();
                        setTimeout(takeSnapshotAndSendData, 500);
                    } else {
                        currentChallengeState = HEAD_POSE_CHALLENGE_STATE.CHALLENGE_PENDING;
                        updateInstruction();
                    }
                }, 1200);
            }
        } else {
            poseVerificationFrames = 0;
        }
    }
}

function updateInstruction() { 
    if (!statusText) return;
    let instruction = "";
    const challenge = CHALLENGE_SEQUENCE[currentChallengeIndex];

    if (calibrationProgressContainer && calibrationProgressBar) { // Verificar que los elementos existan
        if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.CALIBRATING_CENTER) {
            calibrationProgressContainer.style.display = 'block'; // Mostrar contenedor
            const progressPercent = Math.min((calibrationFramesCount_HeadPose / CALIBRATION_FRAMES_HEAD_POSE) * 100, 100);
            calibrationProgressBar.style.width = `${progressPercent}%`;
            // La instrucción para calibración ya no necesita el contador numérico
            instruction = `Calibrando... Mira la camara y mantente quieto.`;
        } else {
            calibrationProgressContainer.style.display = 'none'; // Ocultar en otros estados
            calibrationProgressBar.style.width = `0%`; // Resetear barra
        }
    }

    switch (currentChallengeState) {
        case HEAD_POSE_CHALLENGE_STATE.NONE:
            // instruction = startButton ? 'Haz clic en "Iniciar Verificación" cuando estés listo.' : 'Listo para iniciar la verificación facial.';
            // Como startButton no parece estar en uso activo para esta fase:
            instruction = startButton && startButton.style.display !== 'none'
                ? 'Presiona "Iniciar verificación" para comenzar.'
                : 'Listo para iniciar la verificación facial.';
            break;
        case HEAD_POSE_CHALLENGE_STATE.LOADING_MODELS:
            instruction = "Cargando modelos de IA (MediaPipe)...";
            break;
        case HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE:
            instruction = "Preparando... Asegúrate de que tu rostro esté visible y centrado.";
            // Asegurar que la barra de progreso esté oculta si se vuelve a este estado
            if (calibrationProgressContainer) calibrationProgressContainer.style.display = 'none';
            if (calibrationProgressBar) calibrationProgressBar.style.width = `0%`;
            break;
        case HEAD_POSE_CHALLENGE_STATE.CALIBRATING_CENTER:
            // La instrucción ya se estableció arriba con la lógica de la barra de progreso.
            // Si por alguna razón 'instruction' no se llenó, este es un fallback.
            if (!instruction) instruction = `Calibrando... Mira la camara y mantente quieto.`;
            break;
        // ... (el resto de tus cases permanecen igual)
        case HEAD_POSE_CHALLENGE_STATE.CHALLENGE_PENDING:
        case HEAD_POSE_CHALLENGE_STATE.VERIFYING_POSE:
            if (challenge === 'CENTER') instruction = "Verificando centro... Mira DIRECTO a la cámara.";
            else if (challenge === 'RIGHT') instruction = "Gira tu cabeza a tu DERECHA.";
            else if (challenge === 'LEFT') instruction = "Gira tu cabeza a tu IZQUIERDA.";
            else if (challenge === 'UP') instruction = "Inclina tu cabeza HACIA ARRIBA.";
            else if (challenge === 'DOWN') instruction = "Inclina tu cabeza HACIA ABAJO.";
            else instruction = "Sigue las instrucciones.";

            if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.VERIFYING_POSE && statusText.textContent === instruction) {
                return; 
            }
            break;
        case HEAD_POSE_CHALLENGE_STATE.CHALLENGE_SUCCESS:
            const completedChallengeIndex = currentChallengeIndex -1; 
            const completedChallenge = CHALLENGE_SEQUENCE[completedChallengeIndex >= 0 ? completedChallengeIndex : CHALLENGE_SEQUENCE.length -1 ];
            instruction = `¡Bien hecho! Movimiento '${completedChallenge}' detectado.`;
            break;
        case HEAD_POSE_CHALLENGE_STATE.ALL_CHALLENGES_PASSED:
            instruction = "✅ Identidad verificada con éxito. Enviando datos...";
            break;
        case HEAD_POSE_CHALLENGE_STATE.CHALLENGE_FAILED_ATTEMPT:
            instruction = `Intento ${livenessAttempts} fallido. Prepárate para reintentar la secuencia completa...`;
            break;
        case HEAD_POSE_CHALLENGE_STATE.CHALLENGE_FAILED_FINAL:
            if (statusText.textContent.includes("No se pudo detectar un rostro")) { 
                return; 
            }
            instruction = "❌ No se pudo verificar la autenticidad. Proceso detenido.";
            break;
        default:
            instruction = "Procesando...";
    }
    if (instruction && statusText.textContent !== instruction) {
        statusText.textContent = instruction;
    }
}

function takeSnapshotAndSendData() { 
    if (!video || video.videoWidth === 0 || video.videoHeight === 0 || video.readyState < video.HAVE_CURRENT_DATA) {
        console.error("[MEDIAPIPE_SEND] Video no disponible para captura.");
        if(statusText) statusText.textContent = "Error: No se pudo capturar la imagen del video.";
        stopCamera();
        return;
    }

    if (snapshotInProgress) {
        console.log("[MEDIAPIPE_SEND] Captura ya en progreso; ignorando llamada duplicada.");
        return;
    }
    snapshotInProgress = true;

    const canvas = document.createElement("canvas");
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const ctx = canvas.getContext("2d");
    if (video.style.transform === 'scaleX(-1)') {
        ctx.translate(canvas.width, 0);
        ctx.scale(-1, 1);
    }
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    canvas.toBlob(async (blob) => {
        if (!blob) {
            console.error("[MEDIAPIPE_SEND] No se pudo generar un blob.");
            if(statusText) statusText.textContent = "Error al capturar la imagen.";
            stopCamera();
            return;
        }
        console.log("[MEDIAPIPE_SEND] Captura tomada, preparando para enviar...");
        if(statusText) statusText.textContent = "Procesando y enviando datos...";

        const formData = new FormData();
        const idUserInput = document.getElementById("idUser"); 
        const idUser = idUserInput ? idUserInput.value : getParameterByName("id");

        if (!idUser) {
            console.error("[MEDIAPIPE_SEND] ID de usuario no encontrado.");
            if(statusText) statusText.textContent = "Error: Falta ID de usuario.";
            stopCamera();
            return;
        }
        formData.append("idUser", idUser);
        formData.append("selfie", blob, "snapshot.jpg");

        const veriType = localStorage.getItem('veri'); 
        if (veriType === '1') {
            const pasaporteInput = document.getElementById("pasaporte"); 
            if (pasaporteInput && pasaporteInput.files && pasaporteInput.files.length > 0) {
                formData.append("pasaporte", pasaporteInput.files[0]);
            }
            formData.append("tipo", "1");
        } else if (veriType === '0') {
            const frontalInput = document.getElementById("frontal"); 
            const traseraInput = document.getElementById("trasera"); 
            if (frontalInput && frontalInput.files && frontalInput.files.length > 0) {
                formData.append("front", frontalInput.files[0]);
            }
            if (traseraInput && traseraInput.files && traseraInput.files.length > 0) {
                formData.append("back", traseraInput.files[0]);
            }
            formData.append("tipo", "0");
        } else {
            console.log("[MEDIAPIPE_SEND] Tipo de verificación no especificado.");
        }

        if (typeof axios === 'undefined') {
            console.error("[MEDIAPIPE_SEND] Axios no está definido.");
            if(statusText) statusText.textContent = "Error de configuración: Librería de envío no disponible.";
            stopCamera();
            return;
        }

        try {
            const response = await axios.post("https://api.comexpay.co/api/v1/comexpayRoutes/kyc", formData, {
                headers: { 'Content-Type': 'multipart/form-data' }
            });
            console.log("[MEDIAPIPE_SEND] Datos enviados exitosamente", response.data);
            if(statusText) 
              {
                statusText.textContent = "Datos enviados con éxito. Verificación completada.";
                window.location.href = "https://app.comexpay.co/pages/general/avanzado?id="+idUser
              }
        } catch (error) {
            console.error("[MEDIAPIPE_SEND] Error al enviar los datos:", error.response ? error.response.data : error.message, error);
            if(statusText) statusText.textContent = "Error al enviar los datos. Intenta de nuevo más tarde.";
        } finally {
            stopCamera();
            snapshotInProgress = false;
        }
    }, "image/jpeg", 0.9);
}

function stopCamera() {
    console.log(`[MEDIAPIPE_STOP] Función stopCamera. Estado: ${currentChallengeState}`);
    if (stream2) {
        stream2.getTracks().forEach(track => track.stop());
        stream2 = null;
    }
    if (video) {
        video.srcObject = null;
        video.style.display = "none";
    }
    if (canvasCtx) {
        canvasCtx.clearRect(0, 0, overlayCanvas.width, overlayCanvas.height);
    }

    smoothedAngles = null;
    trackingDropoutFrames = 0;

    if (currentChallengeState !== HEAD_POSE_CHALLENGE_STATE.ALL_CHALLENGES_PASSED &&
        currentChallengeState !== HEAD_POSE_CHALLENGE_STATE.CHALLENGE_FAILED_FINAL) {
        currentChallengeState = HEAD_POSE_CHALLENGE_STATE.NONE;
    }
    updateInstruction();

    if(startButton) {
        if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.ALL_CHALLENGES_PASSED) {
            hideStartButton();
        } else {
            showStartButton('Reintentar verificación');
        }
    }
    console.log(`[MEDIAPIPE_STOP] Cámara y proceso detenidos. Estado final: ${currentChallengeState}`);
}

function getParameterByName(name, url = window.location.href) { 
    name = name.replace(/[\[\]]/g, '\\$&');
    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
          results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

window.iniciarFeDeVida = async function() {
    const currentVideoElement = document.getElementById("video");
    const currentStatusElement = document.getElementById("status");

    if (!currentVideoElement || !currentStatusElement) {
        console.error("[MEDIAPIPE_INIT] Elementos de UI (video/status) no encontrados.");
        return;
    }
    console.log("[MEDIAPIPE_INIT] window.iniciarFeDeVida() llamada.");
    if(startButton) {
        showStartButton('Preparando...');
        startButton.disabled = true;
    }

    loopCallCount = 0;

    if (typeof vision === 'undefined') {
        console.error("[MEDIAPIPE_INIT] El módulo 'vision' de MediaPipe no está definido. Asegúrate de que la importación ES Module al inicio del script esté funcionando y que el script se cargue como type='module'.");
        if(statusText) statusText.textContent = "Error crítico: Fallo al cargar librería de IA.";
        if(startButton) showStartButton('Reintentar verificación');
        return;
    }

    if (!faceLandmarkerInstance) {
        const modelsInitialized = await initializeMediaPipeTask();
        if (!modelsInitialized) {
            if(startButton) showStartButton('Reintentar verificación');
            return;
        }
    } else {
        if (currentChallengeState === HEAD_POSE_CHALLENGE_STATE.NONE ||
            currentChallengeState === HEAD_POSE_CHALLENGE_STATE.LOADING_MODELS ||
            currentChallengeState === HEAD_POSE_CHALLENGE_STATE.CHALLENGE_FAILED_FINAL ||
            currentChallengeState === HEAD_POSE_CHALLENGE_STATE.ALL_CHALLENGES_PASSED) {
            currentChallengeState = HEAD_POSE_CHALLENGE_STATE.AWAITING_FACE;
            smoothedAngles = null;
            trackingDropoutFrames = 0;
            updateInstruction();
        }
    }

    awaitingFaceFrameCounter = 0;
    if (startButton) {
        showStartButton('Iniciar verificación');
    } else {
        await startCameraInternal();
    }
}

console.log("Script de liveness (MediaPipe FaceLandmarker con Malla - ES Module v0.10.3) cargado. Esperando llamada a iniciarFeDeVida().");
if (document.getElementById("status") && currentChallengeState === HEAD_POSE_CHALLENGE_STATE.NONE) {
    updateInstruction();
}
</script>


</body>
</html>