/* ====== Variables de tema (ajusta a tu marca) ====== */
:root{
  --brand: #6d28d9;         /* morado COMEXPAY */
  --brand-600:#5b21b6;
  --ok:#16a34a;
  --warn:#f59e0b;
  --muted:#6b7280;
  --bg:#f6f7fb;
  --card:#ffffff;
  --stroke:#e5e7eb;
  --text:#0f172a;
  --radius:14px;
  --shadow: 0 6px 18px rgba(17,24,39,.06);
  --focus: 0 0 0 3px rgba(109,40,217,.25);
  --spacing: 18px;
  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
}

.contracts{
  font-family: var(--font);
  color: var(--text);
  background: var(--bg);
  border-radius: var(--radius);
  padding: clamp(16px, 3vw, 28px);
  box-shadow: var(--shadow);
  border: 1px solid var(--stroke);
  max-width: 960px;
  margin: 24px auto;
}

.contracts__header{ margin-bottom: 8px; }
.contracts__title{
  margin: 0 0 4px;
  font-size: clamp(20px, 2.4vw, 28px);
  font-weight: 700;
}
.contracts__subtitle{ margin: 0 0 10px; color: var(--muted); font-size: 14px; }

.contracts__list{
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: 12px;
}

/* ====== Tarjeta de contrato ====== */
.contract{
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--card);
  border: 1px solid var(--stroke);
  border-radius: var(--radius);
  padding: 14px clamp(14px, 2vw, 18px);
  transition: border-color .2s, box-shadow .2s, transform .06s;
}
.contract:has(.contract__action:hover){
  border-color: var(--brand);
  box-shadow: 0 8px 20px rgba(109,40,217,.08);
}

.contract__left{ display:flex; align-items:center; gap: 12px; }
.contract__status{
  width: 36px; height: 36px;
  display: grid; place-items: center;
  border-radius: 9999px;
  border: 1px solid var(--stroke);
  background: #fafafa;
  flex-shrink: 0;
}

/* Iconos: ocultos por defecto */
.contract__icon{ width: 20px; height: 20px; fill: currentColor; display:none; }

.contract__info{ display:flex; flex-direction: column; gap: 6px; }
.contract__name{ margin:0; font-size: 16px; font-weight: 700; }

/* Derecha */
.contract__right{ display:flex; align-items:center; gap: 12px; }
.contract__hint{ color: var(--muted); font-size: 13px; display:none; }

/* Botones / acciones: ocultos por defecto */
.contract__action{
  font-weight: 700;
  text-decoration: none;
  color: var(--brand);
  border: 1px solid var(--brand);
  padding: 9px 14px;
  border-radius: 10px;
  transition: background .15s, color .15s, transform .06s, box-shadow .15s;
  display:none;
}
.contract__action:hover{ background: var(--brand); color: #fff; box-shadow: var(--focus); }
.contract__action:active{ transform: translateY(1px); }

/* Acción bloqueada */
.contract__action--locked{
  border: 1px dashed #cbd5e1;
  color: #94a3b8;
  pointer-events: none;
  cursor: not-allowed;
}

/* Badges: ocultos por defecto */
.contract__badge{
  display:none;
  font-size: 12px;
  line-height: 1;
  padding: 6px 8px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  color: var(--muted);
  width: max-content;
}
.contract__badge--done{    color:#065f46; background:#ecfdf5; border-color:#a7f3d0; }
.contract__badge--pending{ color:#92400e; background:#fffbeb; border-color:#fde68a; }
.contract__badge--locked{  color:#334155; background:#f1f5f9; border-color:#e2e8f0; }

/* ====== Estados (icono + colores + qué se muestra) ====== */
/* Iconos por estado */
.contract--done    .icon--done    { display:block; }
.contract--current .icon--current { display:block; }
.contract--locked  .icon--locked  { display:block; }

/* Color del círculo por estado */
.contract--done .contract__status{
  color:#fff; background: var(--ok); border-color: var(--ok);
}
.contract--current{
  outline: 0; box-shadow: 0 0 0 3px rgba(109,40,217,.06);
}
.contract--current .contract__status{
  color:#fff; background: var(--brand); border-color: var(--brand);
}
.contract--locked .contract__status{
  color:#fff; background: #cbd5e1; border-color: #cbd5e1;
}

/* Badges visibles por estado */
.contract--done    .contract__badge--done    { display:inline-block; }
.contract--current .contract__badge--pending { display:inline-block; }
.contract--locked  .contract__badge--locked  { display:inline-block; }

/* Acciones / hints visibles por estado */
.contract--done    .contract__hint              { display:inline; }            /* “Completado” */
.contract--current .contract__action--current   { display:inline-block; }      /* “Firma ahora” */
.contract--locked  .contract__action--locked    { display:inline-block; }      /* “Bloqueado” */

/* Ocultar lo que NO toca en cada estado (evita que salgan dos botones a la vez) */
.contract--done .contract__action,
.contract--done .contract__action--locked { display:none; }

.contract--current .contract__hint,
.contract--current .contract__action--locked { display:none; }

.contract--locked .contract__hint,
.contract--locked .contract__action--current { display:none; }

/* ====== Barra de progreso ====== */
.contracts__progress{
  margin-top: 16px;
  background: #eef2ff;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  overflow: hidden;
}
.contracts__progress-bar{
  --total: 3;           /* total de contratos */
  --done: 0;            /* sobrescrito inline */
  height: 8px;
  width: calc((var(--done) / var(--total)) * 100%);
  background: linear-gradient(90deg, var(--brand), var(--brand-600));
  transition: width .3s ease;
}
.contracts__progress-legend{
  display:flex; justify-content:flex-end;
  padding: 8px 10px;
  font-size: 12px; color: var(--muted);
}

/* ====== Responsivo ====== */
@media (max-width: 560px){
  .contract{ padding: 12px; }
  .contract__name{ font-size: 15px; }
  .contract__action{ padding: 8px 12px; }
}









/* ====== Versión móvil mejorada ====== */
@media (max-width: 560px){

  /* Contenedor general */
  .contracts{
    border-radius: 12px;
    padding: 14px;
    margin: 12px;
  }

  .contracts__title{
    font-size: 20px;
    line-height: 1.2;
    margin-bottom: 4px;
  }
  .contracts__subtitle{
    font-size: 13px;
    line-height: 1.35;
  }

  /* Lista con más aire entre cards, pero compactas */
  .contracts__list{
    gap: 10px;
  }

  /* Card en columna: icono + info arriba, acciones abajo */
  .contract{
    padding: 12px;
    border-radius: 12px;
    box-shadow: none;
    display: grid;
    grid-template-columns: 1fr;            /* una columna */
    grid-template-areas:
      "left"
      "right";
    row-gap: 10px;
  }
  .contract__left{
    grid-area: left;
    align-items: flex-start;
    gap: 10px;
  }
  .contract__right{
    grid-area: right;
    justify-content: space-between;       /* acción a la derecha */
  }

  /* Icono un poco más grande y con borde sutil */
  .contract__status{
    width: 40px;
    height: 40px;
    border-radius: 10px;                  /* “pill” sutil */
    border: none;
  }
  .contract__icon{ width: 22px; height: 22px; }

  /* Texto: más legible y con truncado elegante */
  .contract__name{
    font-size: 15px;
    line-height: 1.28;
    margin-right: 4px;
    display: -webkit-box;
    -webkit-line-clamp: 2;                /* máximo 2 líneas */
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Badges compactos */
  .contract__badge{
    font-size: 11px;
    padding: 6px 8px;
  }

  /* Acción: dedo-tap friendly (alto >= 44px) */
  .contract__action,
  .contract__action--locked{
    padding: 10px 14px;
    border-radius: 12px;
    font-size: 14px;
    line-height: 1;
  }

  /* Botón “Firma ahora” ocupa el ancho disponible a la derecha
     y si no hay espacio, podrá bajar a la siguiente línea sin romper diseño */
  .contract__right{
    gap: 10px;
    flex-wrap: wrap;
  }
  .contract--current .contract__action{
    flex: 1 1 auto;                       /* crece si hay espacio */
    text-align: center;
  }

  /* Estado “Bloqueado” como chip consistente */
  .contract__action--locked{
    border-style: dashed;
    background: #f8fafc;
  }

  /* Hint compacto */
  .contract__hint{
    font-size: 12px;
  }

  /* Progreso más sutil en móvil */
  .contracts__progress{
    margin-top: 10px;
    border-radius: 8px;
  }
  .contracts__progress-legend{
    padding: 6px 8px;
    font-size: 11px;
  }
}

/* ===== Accesibilidad / interacción táctil ===== */
@media (hover: none){
  .contract__action:hover{
    background: transparent;              /* evita flash en táctil */
    color: var(--brand);
    box-shadow: none;
  }
}

/* ===== Animación suave (opcional) ===== */
@media (prefers-reduced-motion: no-preference){
  .contract{ transition: border-color .15s ease, box-shadow .15s ease; }
  .contract__action{ transition: background .15s ease, color .15s ease; }
}

/* ===== Fix: evitar que el botón se deforme en escritorio ===== */
@media (min-width: 561px){
  /* El bloque de la izquierda ocupa el espacio flexible;
     permitimos que el texto se adapte sin empujar al botón */
  .contract__left{
    flex: 1 1 auto;
    min-width: 0;               /* clave para que pueda encogerse */
  }

  /* La zona de acciones NO se encoge ni se parte */
  .contract__right{
    flex: 0 0 auto;             /* ancho natural, sin shrink */
    display: inline-flex;
    align-items: center;
    gap: 12px;
    white-space: nowrap;        /* nada dentro hace wrap */
  }

  /* El botón siempre en una sola línea, altura fija “tap friendly” */
  .contract__action,
  .contract__action--locked{
    white-space: nowrap;        /* no se parte el texto */
    height: 40px;               /* fija la altura */
    line-height: 40px;
    padding: 0 14px;            /* solo padding horizontal */
    display: inline-flex;
    align-items: center;
    border-radius: 12px;
    flex: 0 0 auto;             /* no se encoge */
  }

  /* Si quieres que el título pueda ocupar varias líneas pero sin empujar al botón,
     deja wrap habilitado en el título y recórtalo con elipsis si llega a ser muy largo */
  .contract__name{
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;      /* máx. 2 líneas (ajusta a gusto) */
    -webkit-box-orient: vertical;
    white-space: normal;
  }
}
